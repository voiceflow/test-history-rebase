+ dbcli --version
@voiceflow/dbcli/1.244.1 linux-x64 node-v20.11.1
+ timeout=180
+ wait_for_endpoint pg-postgresql-hl 5432 180
+ local 'host=pg-postgresql-hl'
+ local 'port=5432'
+ local 'timeout=180'
+ set +x
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Waiting for pg-postgresql-hl:5432 to be ready...
Endpoint pg-postgresql-hl:5432 is available.
+ return 0
+ wait_for_endpoint 10.252.212.181 27017 180
+ local 'host=10.252.212.181'
+ local 'port=27017'
+ local 'timeout=180'
+ set +x
Waiting for 10.252.212.181:27017 to be ready...
Waiting for 10.252.212.181:27017 to be ready...
Waiting for 10.252.212.181:27017 to be ready...
Waiting for 10.252.212.181:27017 to be ready...
Waiting for 10.252.212.181:27017 to be ready...
+ return 0
Endpoint 10.252.212.181:27017 is available.
+ dbcli check:pg -e private-cloud -s env -d MAIN
+ grep -q 'Database voiceflow exists'
(node:60) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
+ echo 'Database does not exist, creating it.'
+ set +e
+ dbcli create:pg -e private-cloud -s env -d MAIN
Database does not exist, creating it.
INFO [2024-06-06 19:52:21.458 +0000]: Creating new Postgres Database - voiceflow_local in private-cloud environment...
INFO [2024-06-06 19:52:21.461 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:21.502 +0000]: Attempt 1: creating database owner
(node:72) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:21.710 +0000]: Database voiceflow successfully created with owner postgres
+ set -e
+ dbcli migrate:mongo -e private-cloud -s env
INFO [2024-06-06 19:52:23.409 +0000]: Running migrations on private-cloud mongo database in private-cloud environment...
INFO [2024-06-06 19:52:23.414 +0000]: Starting secrets provider with private-cloud secrets...
INFO [2024-06-06 19:52:23.414 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:23.415 +0000]: Connecting to mongodb
(node:83) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:23.617 +0000]: Migrating mongodb...
INFO [2024-06-06 19:52:24.746 +0000]: [helloWorld] Never run, starting now
INFO [2024-06-06 19:52:24.750 +0000]: [helloWorld] Succeeded
INFO [2024-06-06 19:52:24.764 +0000]: [templates] Never run, starting now
INFO [2024-06-06 19:52:24.766 +0000]: [templates] Succeeded
INFO [2024-06-06 19:52:24.771 +0000]: [templates-seed-refactor] Never run, starting now
INFO [2024-06-06 19:52:24.790 +0000]: [templates-seed-refactor] Succeeded
INFO [2024-06-06 19:52:24.797 +0000]: [dropDialogManagerKeysColletionMigrationScript] Never run, starting now
INFO [2024-06-06 19:52:24.804 +0000]: [dropDialogManagerKeysColletionMigrationScript] Succeeded
INFO [2024-06-06 19:52:24.813 +0000]: [dropDialogManagerAPIKeysColletionMigrationScript] Never run, starting now
INFO [2024-06-06 19:52:24.820 +0000]: [dropDialogManagerAPIKeysColletionMigrationScript] Succeeded
INFO [2024-06-06 19:52:24.826 +0000]: [setExistingAPIKeyTypes] Never run, starting now
INFO [2024-06-06 19:52:24.831 +0000]: [setExistingAPIKeyTypes] Succeeded
INFO [2024-06-06 19:52:24.835 +0000]: [skillIdToVersionID] Never run, starting now
INFO [2024-06-06 19:52:24.840 +0000]: [skillIdToVersionID] Succeeded
INFO [2024-06-06 19:52:24.845 +0000]: [deleteSkillId] Never run, starting now
INFO [2024-06-06 19:52:24.855 +0000]: [deleteSkillId] Succeeded
INFO [2024-06-06 19:52:24.859 +0000]: [addSecondaryVersionIDIndex] Never run, starting now
INFO [2024-06-06 19:52:24.873 +0000]: [addSecondaryVersionIDIndex] Succeeded
INFO [2024-06-06 19:52:24.877 +0000]: [setVersionDefaultValues] Never run, starting now
INFO [2024-06-06 19:52:24.886 +0000]: [setVersionDefaultValues] Succeeded
INFO [2024-06-06 19:52:24.891 +0000]: [templates-hashing] Never run, starting now
INFO [2024-06-06 19:52:24.896 +0000]: [templates-hashing] Succeeded
INFO [2024-06-06 19:52:24.900 +0000]: [movePlatformData] Never run, starting now
INFO [2024-06-06 19:52:24.906 +0000]: [movePlatformData] Succeeded
INFO [2024-06-06 19:52:24.911 +0000]: [refractorTranscriptIndexes] Never run, starting now
INFO [2024-06-06 19:52:24.920 +0000]: [refractorTranscriptIndexes] Succeeded
INFO [2024-06-06 19:52:24.925 +0000]: [optimizeSessionTranscriptIndex] Never run, starting now
INFO [2024-06-06 19:52:24.931 +0000]: [optimizeSessionTranscriptIndex] Succeeded
INFO [2024-06-06 19:52:24.935 +0000]: [removeTranscriptCreatedAt] Never run, starting now
INFO [2024-06-06 19:52:24.939 +0000]: [removeTranscriptCreatedAt] Succeeded
INFO [2024-06-06 19:52:24.945 +0000]: [transcriptUpdatedAt] Never run, starting now
INFO [2024-06-06 19:52:24.949 +0000]: [transcriptUpdatedAt] Succeeded
INFO [2024-06-06 19:52:24.953 +0000]: [workspaceAPIKeyAddProjectReadPermission] Never run, starting now
INFO [2024-06-06 19:52:24.957 +0000]: [workspaceAPIKeyAddProjectReadPermission] Succeeded
INFO [2024-06-06 19:52:24.961 +0000]: [aiAssistGenerateNoMatch] Never run, starting now
INFO [2024-06-06 19:52:24.965 +0000]: [aiAssistGenerateNoMatch] Succeeded
INFO [2024-06-06 19:52:24.968 +0000]: [addLegacyIDIndex] Never run, starting now
INFO [2024-06-06 19:52:24.993 +0000]: [addLegacyIDIndex] Succeeded
INFO [2024-06-06 19:52:24.998 +0000]: [addProjectAIPlaygroundSettings] Never run, starting now
INFO [2024-06-06 19:52:25.003 +0000]: [addProjectAIPlaygroundSettings] Succeeded
INFO [2024-06-06 19:52:25.008 +0000]: [deleteCanvasUpdatedProperties] Never run, starting now
INFO [2024-06-06 19:52:25.012 +0000]: [deleteCanvasUpdatedProperties] Succeeded
INFO [2024-06-06 19:52:25.015 +0000]: [sanitizeAISettings] Never run, starting now
INFO [2024-06-06 19:52:25.019 +0000]: [sanitizeAISettings] Succeeded
INFO [2024-06-06 19:52:25.023 +0000]: [moveCustomBlocksToVersion] Never run, starting now
INFO [2024-06-06 19:52:25.028 +0000]: [moveCustomBlocksToVersion] Succeeded
INFO [2024-06-06 19:52:25.033 +0000]: [deleteCanvasUpdatedAt] Never run, starting now
INFO [2024-06-06 19:52:25.038 +0000]: [deleteCanvasUpdatedAt] Succeeded
INFO [2024-06-06 19:52:25.042 +0000]: [addDiagramIDCompositeIndex] Never run, starting now
INFO [2024-06-06 19:52:25.071 +0000]: [addDiagramIDCompositeIndex] Succeeded
INFO [2024-06-06 19:52:25.075 +0000]: [populateDiagramIDs] Never run, starting now
INFO [2024-06-06 19:52:25.096 +0000]: [populateDiagramIDs] Succeeded
INFO [2024-06-06 19:52:25.100 +0000]: [addMissingDiagramIDs] Never run, starting now
INFO [2024-06-06 19:52:25.105 +0000]: [addMissingDiagramIDs] Succeeded
INFO [2024-06-06 19:52:25.109 +0000]: [dropOldVersionIDIndexes] Never run, starting now
INFO [2024-06-06 19:52:25.117 +0000]: [dropOldVersionIDIndexes] Succeeded
INFO [2024-06-06 19:52:25.121 +0000]: [diagramUniqueIndex] Never run, starting now
INFO [2024-06-06 19:52:25.163 +0000]: [diagramUniqueIndex] Succeeded
INFO [2024-06-06 19:52:25.168 +0000]: [migrateVersionSettings] Never run, starting now
INFO [2024-06-06 19:52:25.173 +0000]: [migrateVersionSettings] Succeeded
INFO [2024-06-06 19:52:25.177 +0000]: [legacyLlmPromptWrapperFix] Never run, starting now
INFO [2024-06-06 19:52:25.181 +0000]: [legacyLlmPromptWrapperFix] Succeeded
INFO [2024-06-06 19:52:25.186 +0000]: [cleanSlateVersionSettings] Never run, starting now
INFO [2024-06-06 19:52:25.190 +0000]: [cleanSlateVersionSettings] Succeeded
INFO [2024-06-06 19:52:25.195 +0000]: [llmIntentClassificationRedo] Never run, starting now
INFO [2024-06-06 19:52:25.202 +0000]: [llmIntentClassificationRedo] Succeeded
INFO [2024-06-06 19:52:25.204 +0000]: 33 scripts completed
INFO [2024-06-06 19:52:25.204 +0000]: -> 33 new scripts were run
INFO [2024-06-06 19:52:25.204 +0000]: -> 0 completed scripts were skipped
INFO [2024-06-06 19:52:25.205 +0000]: starting templates sync
INFO [2024-06-06 19:52:25.785 +0000]: templates synced - summary:
-> 0 templates skipped
-> 39 templates created
   ++ alexa
   ++ alexaAssistant
   ++ google
   ++ googleAssistant
   ++ general
   ++ customAssistant
   ++ chatbot
   ++ chatbotDefault
   ++ dialogflowChat
   ++ dialogflowChatAssistant
   ++ dialogflowVoice
   ++ dialogflowVoiceDefault
   ++ dialogflowCXChat
   ++ dialogflowCXVoice
   ++ voiceflowVoice
   ++ voiceflowChat
   ++ dialogflowVoiceV2
   ++ dialogflowChatV2
   ++ rasaChat
   ++ rasaVoice
   ++ luisChat
   ++ luisVoice
   ++ watsonChat
   ++ watsonVoice
   ++ lexChat
   ++ lexVoice
   ++ einsteinChat
   ++ einsteinVoice
   ++ nuanceMixChat
   ++ nuanceMixVoice
   ++ voiceflowOnboardingChat
   ++ voiceflowOnboardingVoice
   ++ webchatChat
   ++ whatsappChat
   ++ smsChat
   ++ microsoftTeamsChat
   ++ retailPurchases
   ++ supportChatbot
   ++ travelAssistant
-> 0 templates updated
-> 0 templates deleted
INFO [2024-06-06 19:52:25.786 +0000]: ========= MONGODB MIGRATION DONE =======
INFO [2024-06-06 19:52:25.796 +0000]: Migrations completed for mongo database in private-cloud environment!
+ dbcli migrate:logging-mongo -e private-cloud -s env
INFO [2024-06-06 19:52:27.415 +0000]: Running migrations on private-cloud mongo database in private-cloud environment...
INFO [2024-06-06 19:52:27.419 +0000]: Starting secrets provider with private-cloud secrets...
INFO [2024-06-06 19:52:27.419 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:27.420 +0000]: Connecting to mongodb
(node:94) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:27.534 +0000]: Migrating mongodb...
INFO [2024-06-06 19:52:27.686 +0000]: [removeLogColumns] Never run, starting now
INFO [2024-06-06 19:52:27.696 +0000]: [removeLogColumns] Succeeded
INFO [2024-06-06 19:52:27.704 +0000]: [removeProjectIDIndex] Never run, starting now
INFO [2024-06-06 19:52:27.711 +0000]: [removeProjectIDIndex] Succeeded
INFO [2024-06-06 19:52:27.718 +0000]: [removeSessionIDIndex] Never run, starting now
INFO [2024-06-06 19:52:27.724 +0000]: [removeSessionIDIndex] Succeeded
INFO [2024-06-06 19:52:27.730 +0000]: [removeStartTimeIndex] Never run, starting now
INFO [2024-06-06 19:52:27.735 +0000]: [removeStartTimeIndex] Succeeded
INFO [2024-06-06 19:52:27.741 +0000]: [removeGoogleHealthChecks] Never run, starting now
INFO [2024-06-06 19:52:27.747 +0000]: [removeGoogleHealthChecks] Succeeded
INFO [2024-06-06 19:52:27.749 +0000]: 5 scripts completed
INFO [2024-06-06 19:52:27.749 +0000]: -> 5 new scripts were run
INFO [2024-06-06 19:52:27.749 +0000]: -> 0 completed scripts were skipped
INFO [2024-06-06 19:52:27.750 +0000]: ========= MONGODB MIGRATION DONE =======
INFO [2024-06-06 19:52:27.757 +0000]: Migrations completed for mongo database in private-cloud environment!
+ dbcli migrate:chargebee-mongo -e private-cloud -s env
INFO [2024-06-06 19:52:29.253 +0000]: Running migrations on private-cloud mongo database in private-cloud environment...
INFO [2024-06-06 19:52:29.257 +0000]: Starting secrets provider with private-cloud secrets...
INFO [2024-06-06 19:52:29.257 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:29.258 +0000]: Connecting to mongodb
(node:105) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:29.386 +0000]: Migrating mongodb...
INFO [2024-06-06 19:52:29.583 +0000]: [CreateChargebeeCollections] Never run, starting now
INFO [2024-06-06 19:52:30.894 +0000]: [CreateChargebeeCollections] Succeeded
INFO [2024-06-06 19:52:30.902 +0000]: [CreateAdditionalChargebeeCollections] Never run, starting now
INFO [2024-06-06 19:52:31.024 +0000]: [CreateAdditionalChargebeeCollections] Succeeded
INFO [2024-06-06 19:52:31.085 +0000]: [FixAttachedItemsCollection] Never run, starting now
INFO [2024-06-06 19:52:31.109 +0000]: [FixAttachedItemsCollection] Succeeded
INFO [2024-06-06 19:52:31.186 +0000]: [AddWebhookEventsCollection] Never run, starting now
INFO [2024-06-06 19:52:31.283 +0000]: [AddWebhookEventsCollection] Succeeded
INFO [2024-06-06 19:52:31.290 +0000]: [AddMisingSubscriptionIndex] Never run, starting now
INFO [2024-06-06 19:52:31.385 +0000]: [AddMisingSubscriptionIndex] Succeeded
INFO [2024-06-06 19:52:31.396 +0000]: [FixItemEntitlementIndexesIndex] Never run, starting now
INFO [2024-06-06 19:52:31.490 +0000]: [FixItemEntitlementIndexesIndex] Succeeded
INFO [2024-06-06 19:52:31.502 +0000]: [AddWebhookEventsIndex] Never run, starting now
INFO [2024-06-06 19:52:31.519 +0000]: [AddWebhookEventsIndex] Succeeded
INFO [2024-06-06 19:52:31.522 +0000]: 7 scripts completed
INFO [2024-06-06 19:52:31.522 +0000]: -> 7 new scripts were run
INFO [2024-06-06 19:52:31.522 +0000]: -> 0 completed scripts were skipped
INFO [2024-06-06 19:52:31.522 +0000]: ========= MONGODB MIGRATION DONE =======
INFO [2024-06-06 19:52:31.530 +0000]: Migrations completed for mongo database in private-cloud environment!
+ dbcli migrate:test-suite-mongo -e private-cloud -s env
INFO [2024-06-06 19:52:33.192 +0000]: Running migrations on private-cloud mongo database in private-cloud environment...
INFO [2024-06-06 19:52:33.197 +0000]: Starting secrets provider with private-cloud secrets...
INFO [2024-06-06 19:52:33.197 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:33.198 +0000]: Connecting to mongodb
(node:116) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:33.331 +0000]: Migrating mongodb...
INFO [2024-06-06 19:52:33.886 +0000]: ========= MONGODB MIGRATION DONE =======
INFO [2024-06-06 19:52:33.896 +0000]: Migrations completed for mongo database in private-cloud environment!
+ dbcli migrate:pg -e private-cloud -s env -d MAIN
INFO [2024-06-06 19:52:35.474 +0000]: Running migrations on MAIN pg database in private-cloud environment...
INFO [2024-06-06 19:52:35.479 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:35.514 +0000]: Starting migration...
(node:127) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:39.782 +0000]: Batch 1 run: 130 migrations.
INFO [2024-06-06 19:52:39.783 +0000]: Migration file: 20190103181728_creators.js
INFO [2024-06-06 19:52:39.783 +0000]: Migration file: 20190104131532_skills.js
INFO [2024-06-06 19:52:39.783 +0000]: Migration file: 20190104132853_diagrams.js
INFO [2024-06-06 19:52:39.783 +0000]: Migration file: 20190104132859_displays.js
INFO [2024-06-06 19:52:39.784 +0000]: Migration file: 20190104132906_email_templates.js
INFO [2024-06-06 19:52:39.784 +0000]: Migration file: 20190104132917_modules.js
INFO [2024-06-06 19:52:39.784 +0000]: Migration file: 20190104133002_featured.js
INFO [2024-06-06 19:52:39.785 +0000]: Migration file: 20190104133010_sessions.js
INFO [2024-06-06 19:52:39.785 +0000]: Migration file: 20190104133029_user_info.js
INFO [2024-06-06 19:52:39.786 +0000]: Migration file: 20190104133034_user_modules.js
INFO [2024-06-06 19:52:39.786 +0000]: Migration file: 20190104133039_versions.js
INFO [2024-06-06 19:52:39.786 +0000]: Migration file: 20190110180004_add_fulfillment_to_skills.js
INFO [2024-06-06 19:52:39.786 +0000]: Migration file: 20190115134631_add_google_skill_info.js
INFO [2024-06-06 19:52:39.786 +0000]: Migration file: 20190117110818_adding_skill_versions.js
INFO [2024-06-06 19:52:39.787 +0000]: Migration file: 20190117112106_add_template_index_to_modules.js
INFO [2024-06-06 19:52:39.787 +0000]: Migration file: 20190117135915_add_template_skill_id_to_versions.js
INFO [2024-06-06 19:52:39.787 +0000]: Migration file: 20190117152140_products.js
INFO [2024-06-06 19:52:39.787 +0000]: Migration file: 20190117154856_add_datasource_to_displays.js
INFO [2024-06-06 19:52:39.787 +0000]: Migration file: 20190122160750_change_foreign_key_diagrams.js
INFO [2024-06-06 19:52:39.787 +0000]: Migration file: 20190122184741_add_alexa_events_to_skills.js
INFO [2024-06-06 19:52:39.787 +0000]: Migration file: 20190124183852_add_repeat_column.js
INFO [2024-06-06 19:52:39.788 +0000]: Migration file: 20190204122130_add_published_platform.js
INFO [2024-06-06 19:52:39.788 +0000]: Migration file: 20190204132130_add_dialogflow_token.js
INFO [2024-06-06 19:52:39.788 +0000]: Migration file: 20190205141422_add_google_versions.js
INFO [2024-06-06 19:52:39.788 +0000]: Migration file: 20190209140725_last_save_skill.js
INFO [2024-06-06 19:52:39.788 +0000]: Migration file: 20190209142908_remove_last_save_versions.js
INFO [2024-06-06 19:52:39.788 +0000]: Migration file: 20190214142802_add_gactions_token_to_reators.js
INFO [2024-06-06 19:52:39.788 +0000]: Migration file: 20190228163430_real_user_info.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190228163460_add_fields_user_info.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190306140039_add_purpose_field_user_info.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190311115125_product_updates.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190322131929_projects.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190322131934_project_versions.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190322132013_added_fields_to_modules.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190323181030_delete_skill_versions_and_versions.js
INFO [2024-06-06 19:52:39.789 +0000]: Migration file: 20190402132027_integration_users.js
INFO [2024-06-06 19:52:39.790 +0000]: Migration file: 20190410143620_add_module_id_to_diagrams.js
INFO [2024-06-06 19:52:39.790 +0000]: Migration file: 20190410144123_add_project_id_to_user_modules.js
INFO [2024-06-06 19:52:39.790 +0000]: Migration file: 20190416111352_product_amzn_id.js
INFO [2024-06-06 19:52:39.790 +0000]: Migration file: 20190416135332_squash_project_versions_skills.js
INFO [2024-06-06 19:52:39.790 +0000]: Migration file: 20190416140556_teams.js
INFO [2024-06-06 19:52:39.790 +0000]: Migration file: 20190416142908_team_members.js
INFO [2024-06-06 19:52:39.790 +0000]: Migration file: 20190416152242_project_members.js
INFO [2024-06-06 19:52:39.791 +0000]: Migration file: 20190416162239_project_teams.js
INFO [2024-06-06 19:52:39.791 +0000]: Migration file: 20190418201050_creator_image.js
INFO [2024-06-06 19:52:39.791 +0000]: Migration file: 20190418201442_mutate_platform.js
INFO [2024-06-06 19:52:39.791 +0000]: Migration file: 20190422144139_create_team_modules_and_remove_user_modules.js
INFO [2024-06-06 19:52:39.791 +0000]: Migration file: 20190426111234_timezone_conversion.js
INFO [2024-06-06 19:52:39.791 +0000]: Migration file: 20190430134449_alter_cert_time_fields.js
INFO [2024-06-06 19:52:39.791 +0000]: Migration file: 20190430140421_creator_expiry_update.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190501131937_add_boards_to_team.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190507174235_add_selected_vendor_to_project_members.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190508141453_vendors.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190524134754_creator_api_keys.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190625104431_creator_notification_check_time.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190712102957_projectref.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190808104518_add_beta_table.js
INFO [2024-06-06 19:52:39.792 +0000]: Migration file: 20190820140105_add_role_team_members_table.js
INFO [2024-06-06 19:52:39.793 +0000]: Migration file: 20190829151844_add_updates_description_skill_table.js
INFO [2024-06-06 19:52:39.793 +0000]: Migration file: 20190930021315_coupon.js
INFO [2024-06-06 19:52:39.793 +0000]: Migration file: 20191106144214_add_workspace_plan_period.js
INFO [2024-06-06 19:52:39.793 +0000]: Migration file: 20191210152521_coupon_columns.js
INFO [2024-06-06 19:52:39.793 +0000]: Migration file: 20200213160636_workspace_beta_flag.js
INFO [2024-06-06 19:52:39.793 +0000]: Migration file: 20200420162556_update_projects_for_no_plan.js
INFO [2024-06-06 19:52:39.793 +0000]: Migration file: 20200529154746_add-templates-flag.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200530081047_skill_settings.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200610094128_alter_module_project_id.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200612152445_threads.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200615110923_thread_comments.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200618013156_product_updates_creator_id.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200817160212_referrals.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200817161329_add_referrer_to_creators.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200827112313_threads_project_id_to_string.js
INFO [2024-06-06 19:52:39.794 +0000]: Migration file: 20200910114816_templates.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20201008195637_add_octa_id.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20201014113642_project_migration_mappings.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20201014113657_skill_migration_mappings.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20201014113817_diagram_migration_mappings.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20201015142933_thread_soft_delete.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20201022133932_referral_tracking_system.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20201104114833_templates_tag.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20210608105456_organizations.js
INFO [2024-06-06 19:52:39.795 +0000]: Migration file: 20210614155034_transcripts.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210614160607_report_tags.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210614161543_transcript_report_tags.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210625094726_email-verify.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210630135053_transcript_session_id.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210702160846_transcript_creator_id.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210712235512_pre_unique_emails.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210719075159_unique_emails.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210719080839_fid_default.js
INFO [2024-06-06 19:52:39.796 +0000]: Migration file: 20210722121611_add_system_tag.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210722140354_verify_email.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210722223905_platform_templates.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 202108031636422_new_interact.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210818095155_drop_legacy_tables.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210830222145_drop_templates.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210910151659_unique_organizations_name.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210914092610_drop_test_reports.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210914105246_drop_admin_col.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210914112343_internal_admin_table.js
INFO [2024-06-06 19:52:39.797 +0000]: Migration file: 20210914151522_stripe_sub_id_char_length.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 20210926170932_saml_providers.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 20211018155828_add_trial_end_date_column_to_org.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 20220203164039_add_referral_rock_id_to_creator.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 20220214152141_remove_users_from_template_workspace.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 20220217143105_add_transcript_platform.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 20220222092611_remove_transcript_state.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 20220520161943_drop_skill_migration_mappings.js
INFO [2024-06-06 19:52:39.798 +0000]: Migration file: 202206070940322_drop_old_interact.js
INFO [2024-06-06 19:52:39.799 +0000]: Migration file: 202206290092610_add_pk_to_team_members.js
INFO [2024-06-06 19:52:39.799 +0000]: Migration file: 20220711183727_remove_template_workspace.js
INFO [2024-06-06 19:52:39.799 +0000]: Migration file: 20220711185233_remove_template_workspace_column.js
INFO [2024-06-06 19:52:39.799 +0000]: Migration file: 202301271037410_add_teams_boards_text.js
INFO [2024-06-06 19:52:39.799 +0000]: Migration file: 202301271228230_migrate_boards_to_project_lists.js
INFO [2024-06-06 19:52:39.799 +0000]: Migration file: 202301271650000_project_list_default_values.js
INFO [2024-06-06 19:52:39.799 +0000]: Migration file: 202301272323210_boards_default_value.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 202301302032110_delete_boards_column.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 20230403180213_workspace_seats_limit.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 20230517160335_workspace_plan_updated_at.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 202309061045110_drop_displays.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 202309151632110_drop_referrals.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 202309151641110_drop_diagram_migration_mappings.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 20230918133435_threads_creator_fk_delete_cascade.js
INFO [2024-06-06 19:52:39.800 +0000]: Migration file: 20230918135926_thread_comments_creator_fk_cascade.js
INFO [2024-06-06 19:52:39.801 +0000]: Migration file: 20230918140211_product_updates_creator_fk_cascade.js
INFO [2024-06-06 19:52:39.801 +0000]: Migration file: 202309201325110_drop_organization_domains.js
INFO [2024-06-06 19:52:39.801 +0000]: Migration file: 20230930073621_drop_user_info.js
INFO [2024-06-06 19:52:39.801 +0000]: Migration file: 20231018111224_drop_coupons.js
INFO [2024-06-06 19:52:39.801 +0000]: Migration file: 202405100950110_set_beta_flag.js
INFO [2024-06-06 19:52:39.811 +0000]: Migrations completed for MAIN pg database in private-cloud environment!
+ dbcli seed:pg -e private-cloud -s env
INFO [2024-06-06 19:52:41.399 +0000]: Seeding MAIN pg database in private-cloud environment...
INFO [2024-06-06 19:52:41.405 +0000]: Loading secrets from environment variables ...
(node:138) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:41.691 +0000]: Seeding completed for MAIN pg database in private-cloud environment!
+ dbcli v2:migrate:pg -e private-cloud -s env -d MAIN -t all
INFO [2024-06-06 19:52:44.066 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory pre and objects schema...
INFO [2024-06-06 19:52:44.070 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:44.090 +0000]: Starting migration...
(node:149) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:52:44.272 +0000]: Batch 1 run: 1 migrations.
INFO [2024-06-06 19:52:44.272 +0000]: Migration file: 0001_schema_create.js
INFO [2024-06-06 19:52:44.280 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory pre and objects schema!
INFO [2024-06-06 19:52:44.280 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory pre and objects data...
INFO [2024-06-06 19:52:44.281 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:44.282 +0000]: Starting migration...
INFO [2024-06-06 19:52:44.534 +0000]: Batch 1 run: 3 migrations.
INFO [2024-06-06 19:52:44.534 +0000]: Migration file: 0001_migration_utilities.js
INFO [2024-06-06 19:52:44.535 +0000]: Migration file: 0002_migration_fix_schema.js
INFO [2024-06-06 19:52:44.535 +0000]: Migration file: 0003_migration_fix_data.js
INFO [2024-06-06 19:52:44.541 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory pre and objects data!
INFO [2024-06-06 19:52:44.541 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory template and objects schema...
INFO [2024-06-06 19:52:44.542 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:44.542 +0000]: Starting migration...
INFO [2024-06-06 19:52:44.757 +0000]: Batch 1 run: 4 migrations.
INFO [2024-06-06 19:52:44.757 +0000]: Migration file: 0001_schema_attribute.js
INFO [2024-06-06 19:52:44.757 +0000]: Migration file: 0002_schema_event.js
INFO [2024-06-06 19:52:44.757 +0000]: Migration file: 0003_schema_object.js
INFO [2024-06-06 19:52:44.757 +0000]: Migration file: 0004_schema_relationship.js
INFO [2024-06-06 19:52:44.766 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory template and objects schema!
INFO [2024-06-06 19:52:44.766 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory template and objects data...
INFO [2024-06-06 19:52:44.766 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:44.767 +0000]: Starting migration...
INFO [2024-06-06 19:52:44.878 +0000]: No new migrations were run.
INFO [2024-06-06 19:52:44.899 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory template and objects data!
INFO [2024-06-06 19:52:44.900 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory identity and objects schema...
INFO [2024-06-06 19:52:44.900 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:44.901 +0000]: Starting migration...
INFO [2024-06-06 19:52:45.256 +0000]: Batch 1 run: 11 migrations.
INFO [2024-06-06 19:52:45.256 +0000]: Migration file: 0001_schema_api_key.js
INFO [2024-06-06 19:52:45.256 +0000]: Migration file: 0002_schema_organization.js
INFO [2024-06-06 19:52:45.256 +0000]: Migration file: 0003_schema_organization_domain.js
INFO [2024-06-06 19:52:45.256 +0000]: Migration file: 0004_schema_workspace.js
INFO [2024-06-06 19:52:45.257 +0000]: Migration file: 0005_schema_user.js
INFO [2024-06-06 19:52:45.257 +0000]: Migration file: 0006_rename_api_key.js
INFO [2024-06-06 19:52:45.257 +0000]: Migration file: 0007_add_org_image_column.js
INFO [2024-06-06 19:52:45.257 +0000]: Migration file: 0008_add_created_by_to_api_key.js
INFO [2024-06-06 19:52:45.257 +0000]: Migration file: 0009_schema_user_internal_admin.js
INFO [2024-06-06 19:52:45.257 +0000]: Migration file: 0010_alter_identity_organizations.js
INFO [2024-06-06 19:52:45.258 +0000]: Migration file: 0011_organization_user_roles_view.js
INFO [2024-06-06 19:52:45.299 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory identity and objects schema!
INFO [2024-06-06 19:52:45.300 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory identity and objects data...
INFO [2024-06-06 19:52:45.300 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:45.301 +0000]: Starting migration...
WARN [2024-06-06 19:52:45.524 +0000]: migration 0002_migration_organization_domain.js did not return a promise
INFO [2024-06-06 19:52:45.661 +0000]: Batch 1 run: 7 migrations.
INFO [2024-06-06 19:52:45.661 +0000]: Migration file: 0001_migration_workspace_and_organization.js
INFO [2024-06-06 19:52:45.661 +0000]: Migration file: 0002_migration_organization_domain.js
INFO [2024-06-06 19:52:45.661 +0000]: Migration file: 0003_migration_user.js
INFO [2024-06-06 19:52:45.661 +0000]: Migration file: 0004_organization_cleanup.js
INFO [2024-06-06 19:52:45.662 +0000]: Migration file: 0005_migration_add_subscription_id_organization.js
INFO [2024-06-06 19:52:45.662 +0000]: Migration file: 0006_migration_rename_subscription_id_field.js
INFO [2024-06-06 19:52:45.662 +0000]: Migration file: 0007_migration_remove_subscription_id_organization.js
INFO [2024-06-06 19:52:45.668 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory identity and objects data!
INFO [2024-06-06 19:52:45.668 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger otn and objects functions with directory identity...
INFO [2024-06-06 19:52:45.668 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:45.669 +0000]: Starting migration...
WARN [2024-06-06 19:52:45.791 +0000]: migration 0002_identity_organization_domain.js did not return a promise
INFO [2024-06-06 19:52:45.848 +0000]: Batch 1 run: 7 migrations.
INFO [2024-06-06 19:52:45.848 +0000]: Migration file: 0001_identity_organization.js
INFO [2024-06-06 19:52:45.848 +0000]: Migration file: 0002_identity_organization_domain.js
INFO [2024-06-06 19:52:45.848 +0000]: Migration file: 0003_identity_user.js
INFO [2024-06-06 19:52:45.849 +0000]: Migration file: 0004_identity_workspace.js
INFO [2024-06-06 19:52:45.849 +0000]: Migration file: 0005_identity_user_internal_admin.js
INFO [2024-06-06 19:52:45.849 +0000]: Migration file: 0006_drop_identity_organization_domain.js
INFO [2024-06-06 19:52:45.849 +0000]: Migration file: 0007_drop_identity_organization_domain.js
INFO [2024-06-06 19:52:45.865 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger otn and objects functions with directory identity!
INFO [2024-06-06 19:52:45.865 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger otn and objects triggers with directory identity...
INFO [2024-06-06 19:52:45.865 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:45.866 +0000]: Starting migration...
WARN [2024-06-06 19:52:46.000 +0000]: migration 0002_identity_organization_domain.js did not return a promise
INFO [2024-06-06 19:52:46.042 +0000]: Batch 1 run: 6 migrations.
INFO [2024-06-06 19:52:46.042 +0000]: Migration file: 0001_identity_organization.js
INFO [2024-06-06 19:52:46.042 +0000]: Migration file: 0002_identity_organization_domain.js
INFO [2024-06-06 19:52:46.042 +0000]: Migration file: 0003_identity_user.js
INFO [2024-06-06 19:52:46.042 +0000]: Migration file: 0004_identity_workspace.js
INFO [2024-06-06 19:52:46.042 +0000]: Migration file: 0005_identity_user_internal_admin.js
INFO [2024-06-06 19:52:46.043 +0000]: Migration file: 0006_drop_identity_organization_domain.js
INFO [2024-06-06 19:52:46.048 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger otn and objects triggers with directory identity!
INFO [2024-06-06 19:52:46.048 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger nto and objects functions with directory identity...
INFO [2024-06-06 19:52:46.048 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:46.049 +0000]: Starting migration...
WARN [2024-06-06 19:52:46.162 +0000]: migration 0002_identity_organization_domain.js did not return a promise
INFO [2024-06-06 19:52:46.201 +0000]: Batch 1 run: 6 migrations.
INFO [2024-06-06 19:52:46.202 +0000]: Migration file: 0001_identity_organization.js
INFO [2024-06-06 19:52:46.202 +0000]: Migration file: 0002_identity_organization_domain.js
INFO [2024-06-06 19:52:46.202 +0000]: Migration file: 0003_identity_user.js
INFO [2024-06-06 19:52:46.202 +0000]: Migration file: 0004_identity_workspace.js
INFO [2024-06-06 19:52:46.202 +0000]: Migration file: 0006_identity_user_internal_admin.js
INFO [2024-06-06 19:52:46.202 +0000]: Migration file: 0007_drop_identity_organization_domain.js
INFO [2024-06-06 19:52:46.208 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger nto and objects functions with directory identity!
INFO [2024-06-06 19:52:46.208 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger nto and objects triggers with directory identity...
INFO [2024-06-06 19:52:46.208 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:46.209 +0000]: Starting migration...
WARN [2024-06-06 19:52:46.330 +0000]: migration 0002_identity_organization_domain.js did not return a promise
INFO [2024-06-06 19:52:46.375 +0000]: Batch 1 run: 6 migrations.
INFO [2024-06-06 19:52:46.375 +0000]: Migration file: 0001_identity_organization.js
INFO [2024-06-06 19:52:46.375 +0000]: Migration file: 0002_identity_organization_domain.js
INFO [2024-06-06 19:52:46.375 +0000]: Migration file: 0003_identity_user.js
INFO [2024-06-06 19:52:46.375 +0000]: Migration file: 0004_identity_workspace.js
INFO [2024-06-06 19:52:46.376 +0000]: Migration file: 0005_identity_user_internal_admin.js
INFO [2024-06-06 19:52:46.376 +0000]: Migration file: 0006_drop_identity_organization_domain.js
INFO [2024-06-06 19:52:46.381 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger nto and objects triggers with directory identity!
INFO [2024-06-06 19:52:46.382 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory auth and objects schema...
INFO [2024-06-06 19:52:46.382 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:46.383 +0000]: Starting migration...
INFO [2024-06-06 19:52:46.947 +0000]: Batch 1 run: 13 migrations.
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0001_schema_role_scope.js
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0002_schema_role.js
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0003_schema_provider.js
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0004_schema_user_authentication.js
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0005_schema_api_key_authentications.js
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0006_schema_role_to_user.js
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0007_schema_role_to_api_key.js
INFO [2024-06-06 19:52:46.948 +0000]: Migration file: 0008_schema_session.js
INFO [2024-06-06 19:52:46.949 +0000]: Migration file: 0009_rename_role_scope.js
INFO [2024-06-06 19:52:46.949 +0000]: Migration file: 0010_make_api_key_authentication_pk_a_fk.js
INFO [2024-06-06 19:52:46.949 +0000]: Migration file: 0011_create_role_to_api_key_mapping.js
INFO [2024-06-06 19:52:46.949 +0000]: Migration file: 0012_integrations_oauth_tokens.js
INFO [2024-06-06 19:52:46.949 +0000]: Migration file: 0013_subdomain_to_integration_oauth_tokens.js
INFO [2024-06-06 19:52:46.956 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory auth and objects schema!
INFO [2024-06-06 19:52:46.956 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory auth and objects data...
INFO [2024-06-06 19:52:46.956 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:46.956 +0000]: Starting migration...
WARN [2024-06-06 19:52:47.316 +0000]: migration 0005_migration_saml2_provider.js did not return a promise
INFO [2024-06-06 19:52:47.422 +0000]: Batch 1 run: 9 migrations.
INFO [2024-06-06 19:52:47.422 +0000]: Migration file: 0001_migration_provider.js
INFO [2024-06-06 19:52:47.422 +0000]: Migration file: 0002_migration_user_authentication.js
INFO [2024-06-06 19:52:47.422 +0000]: Migration file: 0003_migration_role_to_user.js
INFO [2024-06-06 19:52:47.423 +0000]: Migration file: 0004_migration_api_key_roles.js
INFO [2024-06-06 19:52:47.423 +0000]: Migration file: 0005_migration_saml2_provider.js
INFO [2024-06-06 19:52:47.423 +0000]: Migration file: 0006_migration_auth_provider_checks.js
INFO [2024-06-06 19:52:47.423 +0000]: Migration file: 0007_duplicated_roles_cleanup.js
INFO [2024-06-06 19:52:47.423 +0000]: Migration file: 0008_owner_cleanup.js
INFO [2024-06-06 19:52:47.423 +0000]: Migration file: 0009_oauth_provider_rename.js
INFO [2024-06-06 19:52:47.429 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory auth and objects data!
INFO [2024-06-06 19:52:47.430 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger otn and objects functions with directory auth...
INFO [2024-06-06 19:52:47.430 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:47.431 +0000]: Starting migration...
INFO [2024-06-06 19:52:47.616 +0000]: Batch 1 run: 3 migrations.
INFO [2024-06-06 19:52:47.616 +0000]: Migration file: 0001_auth_roles_to_user.js
INFO [2024-06-06 19:52:47.616 +0000]: Migration file: 0002_auth_user_authentication.js
INFO [2024-06-06 19:52:47.616 +0000]: Migration file: 0003_auth_user_authentication_fix.js
INFO [2024-06-06 19:52:47.622 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger otn and objects functions with directory auth!
INFO [2024-06-06 19:52:47.622 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger otn and objects triggers with directory auth...
INFO [2024-06-06 19:52:47.623 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:47.623 +0000]: Starting migration...
INFO [2024-06-06 19:52:47.781 +0000]: Batch 1 run: 3 migrations.
INFO [2024-06-06 19:52:47.782 +0000]: Migration file: 0001_auth_roles_to_user.js
INFO [2024-06-06 19:52:47.782 +0000]: Migration file: 0002_auth_user_authentication.js
INFO [2024-06-06 19:52:47.782 +0000]: Migration file: 0003_dont_create_workspace_owners.js
INFO [2024-06-06 19:52:47.787 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger otn and objects triggers with directory auth!
INFO [2024-06-06 19:52:47.788 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger nto and objects functions with directory auth...
INFO [2024-06-06 19:52:47.788 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:47.789 +0000]: Starting migration...
INFO [2024-06-06 19:52:47.939 +0000]: Batch 1 run: 4 migrations.
INFO [2024-06-06 19:52:47.939 +0000]: Migration file: 0001_auth_roles_to_user.js
INFO [2024-06-06 19:52:47.939 +0000]: Migration file: 0002_auth_user_authentication.js
INFO [2024-06-06 19:52:47.940 +0000]: Migration file: 0003_fix_auth_role_scope_mapping.js
INFO [2024-06-06 19:52:47.940 +0000]: Migration file: 0004_fix_delete_auth_role_scope.js
INFO [2024-06-06 19:52:47.946 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger nto and objects functions with directory auth!
INFO [2024-06-06 19:52:47.946 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger nto and objects triggers with directory auth...
INFO [2024-06-06 19:52:47.946 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:47.946 +0000]: Starting migration...
INFO [2024-06-06 19:52:48.083 +0000]: Batch 1 run: 2 migrations.
INFO [2024-06-06 19:52:48.083 +0000]: Migration file: 0001_auth_roles_to_user.js
INFO [2024-06-06 19:52:48.083 +0000]: Migration file: 0002_auth_user_authentication.js
INFO [2024-06-06 19:52:48.105 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger nto and objects triggers with directory auth!
INFO [2024-06-06 19:52:48.105 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory app_cxd and objects schema...
INFO [2024-06-06 19:52:48.105 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:48.106 +0000]: Starting migration...
WARN [2024-06-06 19:52:48.317 +0000]: migration 0004_schema_workspace_board.js did not return a promise
INFO [2024-06-06 19:52:48.524 +0000]: Batch 1 run: 11 migrations.
INFO [2024-06-06 19:52:48.524 +0000]: Migration file: 0001_schema_thread.js
INFO [2024-06-06 19:52:48.524 +0000]: Migration file: 0002_schema_thread_comment.js
INFO [2024-06-06 19:52:48.524 +0000]: Migration file: 0003_schema_user_property.js
INFO [2024-06-06 19:52:48.524 +0000]: Migration file: 0004_schema_workspace_board.js
INFO [2024-06-06 19:52:48.524 +0000]: Migration file: 0005_schema_workspace_invitation.js
INFO [2024-06-06 19:52:48.525 +0000]: Migration file: 0006_schema_workspace_property.js
INFO [2024-06-06 19:52:48.525 +0000]: Migration file: 0007_schema_workspace_property_default.js
INFO [2024-06-06 19:52:48.525 +0000]: Migration file: 0008_schema_workspace_property_dashboard_kanban.js
INFO [2024-06-06 19:52:48.525 +0000]: Migration file: 0009_schema_workspace_project_lists.js
INFO [2024-06-06 19:52:48.525 +0000]: Migration file: 0010_migration_workspace_invitation_index.js
INFO [2024-06-06 19:52:48.525 +0000]: Migration file: 0011_new_backups_table.js
INFO [2024-06-06 19:52:48.531 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory app_cxd and objects schema!
INFO [2024-06-06 19:52:48.531 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory app_cxd and objects data...
INFO [2024-06-06 19:52:48.531 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:48.532 +0000]: Starting migration...
WARN [2024-06-06 19:52:48.731 +0000]: migration 0004_migration_workspace_board.js did not return a promise
INFO [2024-06-06 19:52:48.802 +0000]: Batch 1 run: 6 migrations.
INFO [2024-06-06 19:52:48.802 +0000]: Migration file: 0001_migration_thread.js
INFO [2024-06-06 19:52:48.802 +0000]: Migration file: 0002_migration_thread_comment.js
INFO [2024-06-06 19:52:48.802 +0000]: Migration file: 0003_migration_user_property.js
INFO [2024-06-06 19:52:48.802 +0000]: Migration file: 0004_migration_workspace_board.js
INFO [2024-06-06 19:52:48.802 +0000]: Migration file: 0005_migration_workspace_invitation.js
INFO [2024-06-06 19:52:48.802 +0000]: Migration file: 0006_migration_workspace_project_lists.js
INFO [2024-06-06 19:52:48.808 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory app_cxd and objects data!
INFO [2024-06-06 19:52:48.808 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger otn and objects functions with directory app_cxd...
INFO [2024-06-06 19:52:48.808 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:48.809 +0000]: Starting migration...
WARN [2024-06-06 19:52:48.937 +0000]: migration 0003_app_cxd_workspace_board.js did not return a promise
WARN [2024-06-06 19:52:48.957 +0000]: migration 0006_app_cxd_workspace_project_lists.js did not return a promise
INFO [2024-06-06 19:52:48.974 +0000]: Batch 1 run: 7 migrations.
INFO [2024-06-06 19:52:48.974 +0000]: Migration file: 0001_app_cxd_thread_comment.js
INFO [2024-06-06 19:52:48.974 +0000]: Migration file: 0002_app_cxd_thread.js
INFO [2024-06-06 19:52:48.974 +0000]: Migration file: 0003_app_cxd_workspace_board.js
INFO [2024-06-06 19:52:48.974 +0000]: Migration file: 0004_app_cxd_workspace_invitation.js
INFO [2024-06-06 19:52:48.974 +0000]: Migration file: 0005_app_cxd_user_property.js
INFO [2024-06-06 19:52:48.974 +0000]: Migration file: 0006_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:48.974 +0000]: Migration file: 0007_drop_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:48.980 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger otn and objects functions with directory app_cxd!
INFO [2024-06-06 19:52:48.980 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger otn and objects triggers with directory app_cxd...
INFO [2024-06-06 19:52:48.980 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:48.981 +0000]: Starting migration...
WARN [2024-06-06 19:52:49.131 +0000]: migration 0003_app_cxd_workspace_board.js did not return a promise
WARN [2024-06-06 19:52:49.150 +0000]: migration 0006_app_cxd_workspace_project_lists.js did not return a promise
INFO [2024-06-06 19:52:49.167 +0000]: Batch 1 run: 7 migrations.
INFO [2024-06-06 19:52:49.168 +0000]: Migration file: 0001_app_cxd_thread_comment.js
INFO [2024-06-06 19:52:49.168 +0000]: Migration file: 0002_app_cxd_thread.js
INFO [2024-06-06 19:52:49.168 +0000]: Migration file: 0003_app_cxd_workspace_board.js
INFO [2024-06-06 19:52:49.168 +0000]: Migration file: 0004_app_cxd_workspace_invitation.js
INFO [2024-06-06 19:52:49.168 +0000]: Migration file: 0005_app_cxd_user_property.js
INFO [2024-06-06 19:52:49.168 +0000]: Migration file: 0006_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:49.168 +0000]: Migration file: 0007_drop_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:49.174 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger otn and objects triggers with directory app_cxd!
INFO [2024-06-06 19:52:49.174 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger nto and objects functions with directory app_cxd...
INFO [2024-06-06 19:52:49.175 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:49.175 +0000]: Starting migration...
WARN [2024-06-06 19:52:49.441 +0000]: migration 0003_app_cxd_workspace_board.js did not return a promise
WARN [2024-06-06 19:52:49.499 +0000]: migration 0006_app_cxd_workspace_project_lists.js did not return a promise
INFO [2024-06-06 19:52:49.518 +0000]: Batch 1 run: 7 migrations.
INFO [2024-06-06 19:52:49.518 +0000]: Migration file: 0001_app_cxd_thread_comment.js
INFO [2024-06-06 19:52:49.518 +0000]: Migration file: 0002_app_cxd_thread.js
INFO [2024-06-06 19:52:49.518 +0000]: Migration file: 0003_app_cxd_workspace_board.js
INFO [2024-06-06 19:52:49.518 +0000]: Migration file: 0004_app_cxd_workspace_invitation.js
INFO [2024-06-06 19:52:49.518 +0000]: Migration file: 0005_app_cxd_user_property.js
INFO [2024-06-06 19:52:49.518 +0000]: Migration file: 0006_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:49.519 +0000]: Migration file: 0007_drop_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:49.524 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger nto and objects functions with directory app_cxd!
INFO [2024-06-06 19:52:49.524 +0000]: Running migrations on MAIN pg database in private-cloud environment for trigger nto and objects triggers with directory app_cxd...
INFO [2024-06-06 19:52:49.524 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:49.525 +0000]: Starting migration...
WARN [2024-06-06 19:52:49.660 +0000]: migration 0003_app_cxd_workspace_board.js did not return a promise
WARN [2024-06-06 19:52:49.679 +0000]: migration 0006_app_cxd_workspace_project_lists.js did not return a promise
INFO [2024-06-06 19:52:49.696 +0000]: Batch 1 run: 7 migrations.
INFO [2024-06-06 19:52:49.696 +0000]: Migration file: 0001_app_cxd_thread_comment.js
INFO [2024-06-06 19:52:49.696 +0000]: Migration file: 0002_app_cxd_thread.js
INFO [2024-06-06 19:52:49.696 +0000]: Migration file: 0003_app_cxd_workspace_board.js
INFO [2024-06-06 19:52:49.696 +0000]: Migration file: 0004_app_cxd_workspace_invitation.js
INFO [2024-06-06 19:52:49.696 +0000]: Migration file: 0005_app_cxd_user_property.js
INFO [2024-06-06 19:52:49.696 +0000]: Migration file: 0006_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:49.697 +0000]: Migration file: 0007_drop_app_cxd_workspace_project_lists.js
INFO [2024-06-06 19:52:49.702 +0000]: Migrations completed for MAIN pg database in private-cloud environment for trigger nto and objects triggers with directory app_cxd!
INFO [2024-06-06 19:52:49.702 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory billing and objects schema...
INFO [2024-06-06 19:52:49.702 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:49.702 +0000]: Starting migration...
INFO [2024-06-06 19:52:50.341 +0000]: Batch 1 run: 25 migrations.
INFO [2024-06-06 19:52:50.341 +0000]: Migration file: 0001_schema_workspace_plans.js
INFO [2024-06-06 19:52:50.341 +0000]: Migration file: 0002_schema_organization_billing_account.js
INFO [2024-06-06 19:52:50.341 +0000]: Migration file: 0003_schema_workspace_subscriptions.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0004_schema_workspace_subscription.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0005_schema_stripe_subscription_billing_period.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0006_schema_workspace_subscription_add_subscription_item.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0007_schema_resource_scope.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0007_schema_workspace_subscription_add_last_reported_at.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0008_schema_quota.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0009_schema_quota_to_resource.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0010_seed_quota_openai_token.js
INFO [2024-06-06 19:52:50.342 +0000]: Migration file: 0011_billing_plan_quotas.js
INFO [2024-06-06 19:52:50.343 +0000]: Migration file: 0012_billing_workspace_subscriptions_deleted_at.js
INFO [2024-06-06 19:52:50.343 +0000]: Migration file: 0013_clean_up_billing_tables.js
INFO [2024-06-06 19:52:50.343 +0000]: Migration file: 0014_rename_resource_scope.js
INFO [2024-06-06 19:52:50.343 +0000]: Migration file: 0014_schema_workspace_subscription_fix_last_reported_at.js
INFO [2024-06-06 19:52:50.343 +0000]: Migration file: 0015_schema_organization_trial.js
INFO [2024-06-06 19:52:50.343 +0000]: Migration file: 0016_add_unique_index_organization_trial.js
INFO [2024-06-06 19:52:50.343 +0000]: Migration file: 0017_add_workspace_plans_values.js
INFO [2024-06-06 19:52:50.344 +0000]: Migration file: 0018_add_quota_override.js
INFO [2024-06-06 19:52:50.344 +0000]: Migration file: 0019_add_quota_cunsumed_yesterday.js
INFO [2024-06-06 19:52:50.344 +0000]: Migration file: 0020_update_billing_quota.js
INFO [2024-06-06 19:52:50.344 +0000]: Migration file: 0021_add_new_subscription_tables.js
INFO [2024-06-06 19:52:50.344 +0000]: Migration file: 0023_quota_email_notification.js
INFO [2024-06-06 19:52:50.344 +0000]: Migration file: 0024_quota_notification_trigger_percent.js
INFO [2024-06-06 19:52:50.351 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory billing and objects schema!
INFO [2024-06-06 19:52:50.351 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory billing and objects data...
INFO [2024-06-06 19:52:50.352 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:52:50.352 +0000]: Starting migration...
INFO [2024-06-06 19:52:50.525 +0000]: No new migrations were run.
INFO [2024-06-06 19:52:50.530 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory billing and objects data!
[90m[info] [39mMikroORM version: [32m5.9.4[39m
[90m[discovery] [39mORM entity discovery started, using [36mTsMorphMetadataProvider[39m
[90m[discovery] [39m- processing [36m0[39m files
[90m[discovery] [39m- entity discovery finished, found [32m0[39m entities, took [32m15 ms[39m
[90m[info] [39mMikroORM successfully connected to database [32mvoiceflow on postgresql://postgres:*****@pg-postgresql-hl:5432[39m
[90m[query] [39mselect 1 from pg_database where datname = 'voiceflow'[90m [took 3 ms, 1 result][39m
[90m[query] [39mselect 1 from pg_database where datname = 'voiceflow'[90m [took 4 ms, 1 result][39m
[90m[query] [39mselect table_name, table_schema as schema_name, (select pg_catalog.obj_description(c.oid) from pg_catalog.pg_class c where c.oid = (select ('"' || table_schema || '"."' || table_name || '"')::regclass::oid) and c.relname = table_name) as table_comment from information_schema.tables where "table_schema" not like 'pg_%' and "table_schema" not like 'crdb_%' and "table_schema" not like '_timescaledb_%' and "table_schema" not in ('information_schema', 'tiger', 'topology') and table_name != 'geometry_columns' and table_name != 'spatial_ref_sys' and table_type != 'VIEW' order by table_name[90m [took 22 ms, 98 results][39m
[90m[query] [39mselect schema_name from information_schema.schemata where "schema_name" not like 'pg_%' and "schema_name" not like 'crdb_%' and "schema_name" not like '_timescaledb_%' and "schema_name" not in ('information_schema', 'tiger', 'topology') order by schema_name[90m [took 12 ms, 9 results][39m
[90m[query] [39mcreate table "public"."designer_migrations" ("id" serial primary key, "name" varchar(255), "executed_at" timestamptz default current_timestamp)
[90m[query] [39mbegin
[90m[query] [39mselect * from "public"."designer_migrations" order by "id" asc[90m [took 22 ms, 0 result][39m
Processing 'Migration20230524192356'
[90m[query] [39msavepoint trx51
[90m[query] [39mcreate schema if not exists "designer";[90m [took 3 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."assistant" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "workspace_id" int not null, constraint "assistant_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."folder" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "scope" text check ("scope" in ('example')) not null, "parent_id" varchar(255) null, "assistant_id" varchar(255) not null, constraint "folder_pkey" primary key ("id"));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_workspace_id_foreign" foreign key ("workspace_id") references "identity"."workspace" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_parent_id_foreign" foreign key ("parent_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx51
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230524192356')[90m [took 3 ms][39m
Applied 'Migration20230524192356'
Processing 'Migration20230529213244'
[90m[query] [39msavepoint trx52
[90m[query] [39mcreate table "designer"."media_attachment" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "datatype" text check ("datatype" in ('image', 'video')) not null, "is_asset" boolean not null, "url" jsonb not null, "assistant_id" varchar(255) not null, constraint "media_attachment_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."response" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "response_pkey" primary key ("id"));[90m [took 21 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."response_variant" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "language" text check ("language" in ('en-us')) not null, "channel" text check ("channel" in ('default')) not null, "payload_order" text[] not null, "response_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "response_variant_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."persona" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "is_override" boolean not null, "name" varchar(255) null, "model" text check ("model" in ('gpt_3', 'gpt_3.5', 'gpt_4')) null, "temperature" int null, "max_length" int null, "prompt" varchar(255) null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "persona_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."prompt" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "text" jsonb not null, "persona_id" varchar(255) null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "prompt_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."intent" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "automatic_reprompt" boolean not null, "entity_order" text[] not null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "intent_pkey" primary key ("id"));[90m [took 11 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."utterance" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "language" text check ("language" in ('en-us')) not null, "text" jsonb not null, "intent_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "utterance_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."event" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "request_name" varchar(255) not null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "event_pkey" primary key ("id"));[90m [took 43 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."entity" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "color" varchar(255) not null, "classifier" varchar(255) null, "is_array" boolean not null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "entity_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."required_entity" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "reprompt_id" varchar(255) null, "entity_id" varchar(255) not null, "intent_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "required_entity_pkey" primary key ("id"));[90m [took 11 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."entity_variant" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "language" text check ("language" in ('en-us')) not null, "value" varchar(255) not null, "synonyms" text[] not null, "entity_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "entity_variant_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."card_attachment" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "title" jsonb not null, "description" jsonb not null, "button_order" text[] not null, "media_id" varchar(255) null, "assistant_id" varchar(255) not null, constraint "card_attachment_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."card_button" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "label" jsonb not null, "card_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "card_button_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."response_payload_to_attachment" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "type" text check ("type" in ('card', 'media')) not null, "assistant_id" varchar(255) not null, "card_id" varchar(255) null, "media_id" varchar(255) null, constraint "response_payload_to_attachment_pkey" primary key ("id"));[90m [took 36 ms, 0 result][39m
[90m[query] [39mcreate index "response_payload_to_attachment_type_index" on "designer"."response_payload_to_attachment" ("type");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."flow" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "type" text check ("type" in ('story', 'component')) not null, "diagram_id" varchar(255) not null, "assistant_id" varchar(255) not null, "created_by_id" int null, "updated_by_id" int null, "folder_id" varchar(255) null, constraint "flow_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate index "flow_type_index" on "designer"."flow" ("type");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."story" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "status" text check ("status" in ('to_do', 'in_progress', 'complete')) null, "is_enabled" boolean not null, "is_start" boolean not null, "trigger_order" text[] not null, "assignee_id" int not null, "flow_id" varchar(255) null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "story_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."trigger" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "target" text check ("target" in ('event', 'intent')) not null, "story_id" varchar(255) not null, "assistant_id" varchar(255) not null, "event_id" varchar(255) null, "intent_id" varchar(255) null, constraint "trigger_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate index "trigger_target_index" on "designer"."trigger" ("target");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."variable" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "scope" text check ("scope" in ('global', 'local')) not null, "datatype" text check ("datatype" in ('text', 'number', 'date', 'boolean', 'image')) not null, "is_array" boolean not null, "default_value" varchar(255) null, "color" varchar(255) not null, "assistant_id" varchar(255) not null, "created_by_id" int null, "updated_by_id" int null, "folder_id" varchar(255) null, "flow_id" varchar(255) null, constraint "variable_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate index "variable_scope_index" on "designer"."variable" ("scope");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate table "out_flow_mapping" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "direction" text check ("direction" in ('in', 'out')) not null, "flow_id" varchar(255) not null, "assistant_id" varchar(255) not null, "out_from_id" varchar(255) null, "out_to_id" varchar(255) null, constraint "out_flow_mapping_pkey" primary key ("id"));[90m [took 25 ms, 0 result][39m
[90m[query] [39mcreate table "in_flow_mapping" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "direction" text check ("direction" in ('in', 'out')) not null, "flow_id" varchar(255) not null, "assistant_id" varchar(255) not null, "in_from" jsonb not null, "in_to_id" varchar(255) null, constraint "in_flow_mapping_pkey" primary key ("id"));[90m [took 11 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."event_mapping" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "path" jsonb not null, "variable_id" varchar(255) null, "event_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "event_mapping_pkey" primary key ("id"));[90m [took 11 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."flow_mapping" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "direction" text check ("direction" in ('in', 'out')) not null, "flow_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "flow_mapping_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."condition" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "type" text check ("type" in ('expression', 'prompt', 'script')) not null, "assistant_id" varchar(255) not null, "match_all" boolean null, "turns" int null, "prompt_id" varchar(255) null, "code" jsonb null, constraint "condition_pkey" primary key ("id"));[90m [took 14 ms, 0 result][39m
[90m[query] [39mcreate index "condition_type_index" on "designer"."condition" ("type");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."condition_predicate" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "operation" text check ("operation" in ('is', 'is_not', 'is_empty', 'is_not_empty', 'greater_than', 'greater_or_equal', 'less_than', 'less_or_equal', 'contains', 'not_contains', 'starts_with', 'ends_with')) not null, "rhs" jsonb not null, "condition_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "condition_predicate_pkey" primary key ("id"));[90m [took 42 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."condition_assertion" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "operation" text check ("operation" in ('is', 'is_not', 'is_empty', 'is_not_empty', 'greater_than', 'greater_or_equal', 'less_than', 'less_or_equal', 'contains', 'not_contains', 'starts_with', 'ends_with')) not null, "lhs" jsonb not null, "rhs" jsonb not null, "condition_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "condition_assertion_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."response_payload" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "type" text check ("type" in ('json', 'prompt', 'text')) not null, "card_layout" text check ("card_layout" in ('carousel', 'list')) not null, "speed" int not null, "attachment_order" text[] not null, "condition_id" varchar(255) null, "variant_id" varchar(255) not null, "assistant_id" varchar(255) not null, "json" jsonb null, "turns" int null, "memory_only" boolean null, "prompt_id" varchar(255) null, "text" jsonb null, constraint "response_payload_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate index "response_payload_type_index" on "designer"."response_payload" ("type");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate table "response_payload_attachments" ("base_response_payload_id" varchar(255) not null, "base_response_payload_to_attachment_id" varchar(255) not null, constraint "response_payload_attachments_pkey" primary key ("base_response_payload_id", "base_response_payload_to_attachment_id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" add constraint "media_attachment_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 31 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_response_id_foreign" foreign key ("response_id") references "designer"."response" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_persona_id_foreign" foreign key ("persona_id") references "designer"."persona" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 50 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_intent_id_foreign" foreign key ("intent_id") references "designer"."intent" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 40 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_reprompt_id_foreign" foreign key ("reprompt_id") references "designer"."response" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_entity_id_foreign" foreign key ("entity_id") references "designer"."entity" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_intent_id_foreign" foreign key ("intent_id") references "designer"."intent" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add constraint "entity_variant_entity_id_foreign" foreign key ("entity_id") references "designer"."entity" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add constraint "entity_variant_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_media_id_foreign" foreign key ("media_id") references "designer"."media_attachment" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_card_id_foreign" foreign key ("card_id") references "designer"."card_attachment" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 42 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload_to_attachment" add constraint "response_payload_to_attachment_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload_to_attachment" add constraint "response_payload_to_attachment_card_id_foreign" foreign key ("card_id") references "designer"."card_attachment" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload_to_attachment" add constraint "response_payload_to_attachment_media_id_foreign" foreign key ("media_id") references "designer"."media_attachment" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_assignee_id_foreign" foreign key ("assignee_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_flow_id_foreign" foreign key ("flow_id") references "designer"."flow" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 45 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_story_id_foreign" foreign key ("story_id") references "designer"."story" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_event_id_foreign" foreign key ("event_id") references "designer"."event" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_intent_id_foreign" foreign key ("intent_id") references "designer"."intent" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_flow_id_foreign" foreign key ("flow_id") references "designer"."flow" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "out_flow_mapping" add constraint "out_flow_mapping_flow_id_foreign" foreign key ("flow_id") references "designer"."flow" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "out_flow_mapping" add constraint "out_flow_mapping_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "out_flow_mapping" add constraint "out_flow_mapping_out_from_id_foreign" foreign key ("out_from_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "out_flow_mapping" add constraint "out_flow_mapping_out_to_id_foreign" foreign key ("out_to_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 36 ms, 0 result][39m
[90m[query] [39malter table "in_flow_mapping" add constraint "in_flow_mapping_flow_id_foreign" foreign key ("flow_id") references "designer"."flow" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "in_flow_mapping" add constraint "in_flow_mapping_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "in_flow_mapping" add constraint "in_flow_mapping_in_to_id_foreign" foreign key ("in_to_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_variable_id_foreign" foreign key ("variable_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_event_id_foreign" foreign key ("event_id") references "designer"."event" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" add constraint "flow_mapping_flow_id_foreign" foreign key ("flow_id") references "designer"."flow" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" add constraint "flow_mapping_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_prompt_id_foreign" foreign key ("prompt_id") references "designer"."prompt" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_condition_id_foreign" foreign key ("condition_id") references "designer"."condition" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_condition_id_foreign" foreign key ("condition_id") references "designer"."condition" ("id") on update cascade;[90m [took 39 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload" add constraint "response_payload_condition_id_foreign" foreign key ("condition_id") references "designer"."condition" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload" add constraint "response_payload_variant_id_foreign" foreign key ("variant_id") references "designer"."response_variant" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload" add constraint "response_payload_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload" add constraint "response_payload_prompt_id_foreign" foreign key ("prompt_id") references "designer"."prompt" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "response_payload_attachments" add constraint "response_payload_attachments_base_response_payload_id_foreign" foreign key ("base_response_payload_id") references "designer"."response_payload" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "response_payload_attachments" add constraint "response_payload_attachments_base_response_payloa_931d6_foreign" foreign key ("base_response_payload_to_attachment_id") references "designer"."response_payload_to_attachment" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint if exists "folder_scope_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add column "active_persona_id" varchar(255) null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_active_persona_id_foreign" foreign key ("active_persona_id") references "designer"."persona" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_active_persona_id_unique" unique ("active_persona_id");[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "scope" type text using ("scope"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_scope_check" check ("scope" in ('entity', 'event', 'flow', 'intent', 'prompt', 'persona', 'response', 'story', 'variable'));[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx52
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230529213244')[90m [took 4 ms][39m
Applied 'Migration20230529213244'
Processing 'Migration20230530055658'
[90m[query] [39msavepoint trx53
[90m[query] [39mcreate table "designer"."function" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null, "name" varchar(255) not null, "code" varchar(255) not null, "paths" text[] not null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null, constraint "function_pkey" primary key ("id"));[90m [took 24 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint if exists "folder_scope_check";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_created_by_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_updated_by_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop constraint "variable_created_by_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop constraint "variable_updated_by_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "scope" type text using ("scope"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_scope_check" check ("scope" in ('entity', 'event', 'flow', 'function', 'intent', 'prompt', 'persona', 'response', 'story', 'variable'));[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "created_by_id" type int using ("created_by_id"::int);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "created_by_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "updated_by_id" type int using ("updated_by_id"::int);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "updated_by_id" set not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "created_by_id" type int using ("created_by_id"::int);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "created_by_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "updated_by_id" type int using ("updated_by_id"::int);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "updated_by_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 9 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" alter column "code" type varchar(255) using ("code"::varchar(255));[90m [took 16 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx53
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230530055658')[90m [took 4 ms][39m
Applied 'Migration20230530055658'
Processing 'Migration20230531164111'
[90m[query] [39msavepoint trx54
[90m[query] [39malter table "designer"."response_payload_to_attachment" add column "payload_id" varchar(255) not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload_to_attachment" add constraint "response_payload_to_attachment_payload_id_foreign" foreign key ("payload_id") references "designer"."response_payload" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx54
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230531164111')[90m [took 3 ms][39m
Applied 'Migration20230531164111'
Processing 'Migration20230531172342'
[90m[query] [39msavepoint trx55
[90m[query] [39mdrop table if exists "out_flow_mapping" cascade;[90m [took 9 ms, 0 result][39m
[90m[query] [39mdrop table if exists "in_flow_mapping" cascade;[90m [took 37 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" add column "in_from" jsonb null, add column "out_from_id" varchar(255) null default null, add column "out_to_id" varchar(255) null default null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" add constraint "flow_mapping_out_from_id_foreign" foreign key ("out_from_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" add constraint "flow_mapping_out_to_id_foreign" foreign key ("out_to_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39mcreate index "flow_mapping_direction_index" on "designer"."flow_mapping" ("direction");[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx55
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230531172342')[90m [took 3 ms][39m
Applied 'Migration20230531172342'
Processing 'Migration20230531172806'
[90m[query] [39msavepoint trx56
[90m[query] [39malter table "designer"."flow_mapping" drop constraint "flow_mapping_out_to_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" rename column "out_to_id" to "to_id";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" add constraint "flow_mapping_to_id_foreign" foreign key ("to_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx56
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230531172806')[90m [took 3 ms][39m
Applied 'Migration20230531172806'
Processing 'Migration20230614202328'
[90m[query] [39msavepoint trx57
[90m[query] [39malter table "designer"."story" drop constraint "story_flow_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop constraint "variable_flow_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow_mapping" drop constraint "flow_mapping_flow_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."component" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "name" varchar(255) not null, "diagram_id" varchar(255) not null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null default null, constraint "component_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."component_mapping" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "direction" text check ("direction" in ('in', 'out')) not null, "component_id" varchar(255) not null, "assistant_id" varchar(255) not null, "in_from" jsonb null, "out_from_id" varchar(255) null default null, "to_id" varchar(255) null default null, constraint "component_mapping_pkey" primary key ("id"));[90m [took 16 ms, 0 result][39m
[90m[query] [39mcreate index "component_mapping_direction_index" on "designer"."component_mapping" ("direction");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."component" add constraint "component_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."component" add constraint "component_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."component" add constraint "component_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."component" add constraint "component_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."component_mapping" add constraint "component_mapping_component_id_foreign" foreign key ("component_id") references "designer"."component" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."component_mapping" add constraint "component_mapping_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."component_mapping" add constraint "component_mapping_out_from_id_foreign" foreign key ("out_from_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."component_mapping" add constraint "component_mapping_to_id_foreign" foreign key ("to_id") references "designer"."variable" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."flow" cascade;[90m [took 45 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."flow_mapping" cascade;[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint if exists "folder_scope_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "scope" type text using ("scope"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_scope_check" check ("scope" in ('entity', 'event', 'component', 'function', 'intent', 'prompt', 'persona', 'response', 'story', 'variable'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" rename column "flow_id" to "component_id";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_component_id_foreign" foreign key ("component_id") references "designer"."component" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" rename column "flow_id" to "component_id";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_component_id_foreign" foreign key ("component_id") references "designer"."component" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx57
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230614202328')[90m [took 3 ms][39m
Applied 'Migration20230614202328'
Processing 'Migration20230614202745'
[90m[query] [39msavepoint trx58
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_story_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."flow" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "name" varchar(255) not null, "diagram_id" varchar(255) not null, "status" text check ("status" in ('to_do', 'in_progress', 'complete')) null default null, "is_enabled" boolean not null, "is_start" boolean not null, "trigger_order" text[] not null, "assignee_id" int not null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null default null, constraint "flow_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_assignee_id_foreign" foreign key ("assignee_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 25 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."story" cascade;[90m [took 9 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint if exists "folder_scope_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "scope" type text using ("scope"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_scope_check" check ("scope" in ('component', 'entity', 'event', 'flow', 'function', 'intent', 'prompt', 'persona', 'response', 'variable'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" rename column "story_id" to "flow_id";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_flow_id_foreign" foreign key ("flow_id") references "designer"."flow" ("id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx58
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230614202745')[90m [took 3 ms][39m
Applied 'Migration20230614202745'
Processing 'Migration20230615111848'
[90m[query] [39msavepoint trx59
[90m[query] [39malter table "designer"."response_payload" add column "context" text check ("context" in ('prompt', 'memory', 'knowledge_base')) null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_payload" drop column "memory_only";[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx59
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230615111848')[90m [took 3 ms][39m
Applied 'Migration20230615111848'
Processing 'Migration20230615113904'
[90m[query] [39msavepoint trx60
[90m[query] [39malter table "designer"."event" add column "description" varchar(255) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx60
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230615113904')[90m [took 3 ms][39m
Applied 'Migration20230615113904'
Processing 'Migration20230615143303'
[90m[query] [39msavepoint trx61
[90m[query] [39mcreate table "designer"."function_variable" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "name" varchar(255) not null, "description" varchar(255) null default null, "type" text check ("type" in ('input', 'output')) not null, "function_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "function_variable_pkey" primary key ("id"));[90m [took 18 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."function_path" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "name" varchar(255) not null, "label" varchar(255) null, "function_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "function_path_pkey" primary key ("id"));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_function_id_foreign" foreign key ("function_id") references "designer"."function" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_function_id_foreign" foreign key ("function_id") references "designer"."function" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" rename column "prompt" to "role";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add column "description" varchar(255) null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add column "description" varchar(255) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" drop column "paths";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add column "description" varchar(255) null default null, add column "can_interrupt" boolean not null, add column "repeat_on_resume" boolean not null, add column "quiet_resume" boolean not null, add column "transition" text check ("transition" in ('discard', 'pause')) not null, add column "resume" text check ("resume" in ('none', 'response')) not null, add column "response_id" varchar(255) null default null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_response_id_foreign" foreign key ("response_id") references "designer"."response" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."component" add column "description" varchar(255) null default null;[90m [took 34 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add column "system" text check ("system" in ('intent_confidence', 'last_response', 'last_utterance', 'sessions', 'timestamp', 'user_id')) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx61
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230615143303')[90m [took 3 ms][39m
Applied 'Migration20230615143303'
Processing 'Migration20230712023850'
[90m[query] [39msavepoint trx62
[90m[query] [39malter table "designer"."response_payload_to_attachment" drop constraint "response_payload_to_attachment_payload_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "response_payload_attachments" drop constraint "response_payload_attachments_base_response_payload_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "response_payload_attachments" drop constraint "response_payload_attachments_base_response_payloa_931d6_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."response_discriminator" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "language" text check ("language" in ('en-us')) not null, "channel" text check ("channel" in ('default')) not null, "variant_order" text[] not null, "response_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "response_discriminator_pkey" primary key ("id"));[90m [took 14 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."response_attachment" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "type" text check ("type" in ('card', 'media')) not null, "variant_id" varchar(255) not null, "assistant_id" varchar(255) not null, "card_id" varchar(255) null, "media_id" varchar(255) null, constraint "response_attachment_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39mcreate index "response_attachment_type_index" on "designer"."response_attachment" ("type");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate table "response_variant_attachments" ("base_response_variant_id" varchar(255) not null, "base_response_attachment_id" varchar(255) not null, constraint "response_variant_attachments_pkey" primary key ("base_response_variant_id", "base_response_attachment_id"));[90m [took 34 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_response_id_foreign" foreign key ("response_id") references "designer"."response" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_variant_id_foreign" foreign key ("variant_id") references "designer"."response_variant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_card_id_foreign" foreign key ("card_id") references "designer"."card_attachment" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_media_id_foreign" foreign key ("media_id") references "designer"."media_attachment" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "response_variant_attachments" add constraint "response_variant_attachments_base_response_variant_id_foreign" foreign key ("base_response_variant_id") references "designer"."response_variant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "response_variant_attachments" add constraint "response_variant_attachments_base_response_attachment_id_foreign" foreign key ("base_response_attachment_id") references "designer"."response_attachment" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."response_payload" cascade;[90m [took 12 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."response_payload_to_attachment" cascade;[90m [took 45 ms, 0 result][39m
[90m[query] [39mdrop table if exists "response_payload_attachments" cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_response_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add column "type" text check ("type" in ('json', 'prompt', 'text')) not null, add column "speed" int not null, add column "card_layout" text check ("card_layout" in ('carousel', 'list')) not null, add column "condition_id" varchar(255) null default null, add column "json" jsonb null, add column "turns" int null, add column "context" text check ("context" in ('prompt', 'memory', 'knowledge_base')) null, add column "prompt_id" varchar(255) null default null, add column "text" jsonb null;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_condition_id_foreign" foreign key ("condition_id") references "designer"."condition" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_prompt_id_foreign" foreign key ("prompt_id") references "designer"."prompt" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop column "language";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop column "channel";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" rename column "payload_order" to "attachment_order";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" rename column "response_id" to "discriminator_id";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_discriminator_id_foreign" foreign key ("discriminator_id") references "designer"."response_discriminator" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "response_variant_type_index" on "designer"."response_variant" ("type");[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx62
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230712023850')[90m [took 39 ms][39m
Applied 'Migration20230712023850'
Processing 'Migration20230712053415'
[90m[query] [39msavepoint trx63
[90m[query] [39malter table "designer"."variable" drop constraint "variable_component_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."component_mapping" drop constraint "component_mapping_component_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."persona_override" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "name" varchar(255) null default null, "model" text check ("model" in ('gpt_3', 'gpt_3.5', 'gpt_4')) null default null, "temperature" int null default null, "max_length" int null default null, "system_prompt" varchar(255) null default null, "persona_id" varchar(255) not null, "assistant_id" varchar(255) not null, constraint "persona_override_pkey" primary key ("id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."story" ("id" varchar(255) not null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "deleted_at" timestamptz(0) null default null, "name" varchar(255) not null, "description" varchar(255) null default null, "status" text check ("status" in ('to_do', 'in_progress', 'complete')) null default null, "is_enabled" boolean not null, "is_start" boolean not null, "assignee_id" int not null, "trigger_order" text[] not null, "flow_id" varchar(255) null default null, "assistant_id" varchar(255) not null, "created_by_id" int not null, "updated_by_id" int not null, "folder_id" varchar(255) null default null, constraint "story_pkey" primary key ("id"));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_persona_id_foreign" foreign key ("persona_id") references "designer"."persona" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_assignee_id_foreign" foreign key ("assignee_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_flow_id_foreign" foreign key ("flow_id") references "designer"."flow" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 32 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_folder_id_foreign" foreign key ("folder_id") references "designer"."folder" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."component" cascade;[90m [took 9 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."component_mapping" cascade;[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint if exists "folder_scope_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop constraint if exists "persona_model_check";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop constraint "prompt_persona_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_assignee_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_response_id_foreign";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_flow_id_foreign";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "scope" type text using ("scope"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_scope_check" check ("scope" in ('entity', 'event', 'flow', 'function', 'intent', 'prompt', 'persona', 'response', 'story', 'variable'));[90m [took 4 ms, 0 result][39m
[90m[query] [39mdrop index "designer"."variable_scope_index";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop column "scope";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop column "component_id";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add column "system_prompt" varchar(255) not null;[90m [took 36 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "name" type varchar(255) using ("name"::varchar(255));[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "name" set not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "model" type text using ("model"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_model_check" check ("model" in ('gpt_3', 'gpt_3.5', 'gpt_4'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "model" set not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "temperature" type int using ("temperature"::int);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "temperature" set not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "max_length" type int using ("max_length"::int);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "max_length" set not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop column "is_override";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop column "role";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_persona_id_foreign" foreign key ("persona_id") references "designer"."persona_override" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add column "image" varchar(255) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "status";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "is_enabled";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "is_start";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "can_interrupt";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "repeat_on_resume";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "quiet_resume";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "transition";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "resume";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "trigger_order";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "assignee_id";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "response_id";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" rename column "flow_id" to "story_id";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_story_id_foreign" foreign key ("story_id") references "designer"."story" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" alter column "code" type jsonb using ("code"::jsonb);[90m [took 15 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx63
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230712053415')[90m [took 3 ms][39m
Applied 'Migration20230712053415'
Processing 'Migration20230720163857'
[90m[query] [39msavepoint trx64
[90m[query] [39mdrop table if exists "response_variant_attachments" cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx64
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230720163857')[90m [took 3 ms][39m
Applied 'Migration20230720163857'
Processing 'Migration20230724164213'
[90m[query] [39msavepoint trx65
[90m[query] [39malter table "designer"."entity" add column "description" varchar(255) null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx65
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230724164213')[90m [took 3 ms][39m
Applied 'Migration20230724164213'
Processing 'Migration20230727155559'
[90m[query] [39msavepoint trx66
[90m[query] [39malter table "designer"."response_variant" alter column "speed" type int using ("speed"::int);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "speed" drop not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx66
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230727155559')[90m [took 3 ms][39m
Applied 'Migration20230727155559'
Processing 'Migration20230727164627'
[90m[query] [39msavepoint trx67
[90m[query] [39malter table "designer"."response_variant" drop constraint if exists "response_variant_card_layout_check";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "card_layout" type text using ("card_layout"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_card_layout_check" check ("card_layout" in ('carousel', 'list'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "card_layout" drop not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx67
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230727164627')[90m [took 3 ms][39m
Applied 'Migration20230727164627'
Processing 'Migration20230801093920'
[90m[query] [39msavepoint trx68
[90m[query] [39malter table "designer"."variable" add column "description" varchar(255) null;[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx68
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20230801093920')[90m [took 4 ms][39m
Applied 'Migration20230801093920'
Processing 'Migration20231003141801'
[90m[query] [39msavepoint trx69
[90m[query] [39malter table "designer"."assistant" drop constraint "assistant_active_persona_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint "folder_parent_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop constraint "variable_folder_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" drop constraint "response_folder_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" drop constraint "response_discriminator_response_id_foreign";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop constraint "persona_folder_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop constraint "persona_override_persona_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop constraint "prompt_folder_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop constraint "prompt_persona_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" drop constraint "intent_folder_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" drop constraint "utterance_intent_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" drop constraint "function_folder_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" drop constraint "function_variable_function_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" drop constraint "function_path_function_id_foreign";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_folder_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint "story_folder_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint "story_flow_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" drop constraint "event_folder_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" drop constraint "event_mapping_event_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" drop constraint "event_mapping_variable_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" drop constraint "entity_folder_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_entity_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_intent_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_reprompt_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" drop constraint "entity_variant_entity_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" drop constraint "card_attachment_media_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" drop constraint "card_button_card_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_story_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_event_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_intent_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" drop constraint "condition_prompt_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" drop constraint "condition_predicate_condition_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" drop constraint "condition_assertion_condition_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_condition_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_discriminator_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_prompt_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_variant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_card_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_media_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add column "active_environment_id" varchar(255) not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 318 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" alter column "active_persona_id" type varchar(24) using ("active_persona_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" drop constraint "assistant_active_persona_id_unique";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_active_persona_id_active_environment_id_unique" unique ("active_persona_id", "active_environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_id_unique" unique ("id");[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" add column "environment_id" varchar(24) not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 55 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" drop constraint "media_attachment_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" add constraint "media_attachment_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" add constraint "media_attachment_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "parent_id" type varchar(24) using ("parent_id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 52 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint "folder_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_parent_id_environment_id_foreign" foreign key ("parent_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 56 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop constraint "variable_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add column "environment_id" varchar(24) null default null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 51 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" drop constraint "response_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add column "environment_id" varchar(24) not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" alter column "response_id" type varchar(24) using ("response_id"::varchar(24));[90m [took 42 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" drop constraint "response_discriminator_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_response_id_environment_id_foreign" foreign key ("response_id", "environment_id") references "designer"."response" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 43 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop constraint "persona_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_id_environment_id_unique" unique ("id", "environment_id");[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add column "environment_id" varchar(24) not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 53 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" alter column "persona_id" type varchar(24) using ("persona_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop constraint "persona_override_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_persona_id_environment_id_foreign" foreign key ("persona_id", "environment_id") references "designer"."persona" ("id", "environment_id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_id_environment_id_unique" unique ("id", "environment_id");[90m [took 10 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_pkey" primary key ("id", "environment_id");[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add column "environment_id" varchar(24) null default null;[90m [took 39 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 69 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" alter column "persona_id" type varchar(24) using ("persona_id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop constraint "prompt_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_persona_id_environment_id_foreign" foreign key ("persona_id", "environment_id") references "designer"."persona_override" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 45 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" drop constraint "intent_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add column "environment_id" varchar(24) not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" alter column "intent_id" type varchar(24) using ("intent_id"::varchar(24));[90m [took 45 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 28 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" drop constraint "utterance_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_intent_id_environment_id_foreign" foreign key ("intent_id", "environment_id") references "designer"."intent" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 40 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" drop constraint "function_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add column "environment_id" varchar(24) not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 48 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" alter column "function_id" type varchar(24) using ("function_id"::varchar(24));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" drop constraint "function_variable_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_function_id_environment_id_foreign" foreign key ("function_id", "environment_id") references "designer"."function" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add column "environment_id" varchar(24) not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 45 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" alter column "function_id" type varchar(24) using ("function_id"::varchar(24));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" drop constraint "function_path_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_function_id_environment_id_foreign" foreign key ("function_id", "environment_id") references "designer"."function" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 48 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_id_environment_id_unique" unique ("id", "environment_id");[90m [took 54 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add column "environment_id" varchar(24) null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "flow_id" type varchar(24) using ("flow_id"::varchar(24));[90m [took 52 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint "story_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_flow_id_environment_id_foreign" foreign key ("flow_id", "environment_id") references "designer"."flow" ("id", "environment_id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_pkey" primary key ("id", "environment_id");[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 47 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" drop constraint "event_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 53 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" alter column "event_id" type varchar(24) using ("event_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" alter column "variable_id" type varchar(24) using ("variable_id"::varchar(24));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" drop constraint "event_mapping_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_event_id_environment_id_foreign" foreign key ("event_id", "environment_id") references "designer"."event" ("id", "environment_id") on update cascade;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_variable_id_environment_id_foreign" foreign key ("variable_id", "environment_id") references "designer"."variable" ("id", "environment_id") on update cascade on delete set null;[90m [took 46 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_pkey" primary key ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add column "environment_id" varchar(24) null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" alter column "folder_id" type varchar(24) using ("folder_id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" drop constraint "entity_pkey";[90m [took 38 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "entity_id" type varchar(24) using ("entity_id"::varchar(24));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "intent_id" type varchar(24) using ("intent_id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "reprompt_id" type varchar(24) using ("reprompt_id"::varchar(24));[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 39 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_entity_id_environment_id_foreign" foreign key ("entity_id", "environment_id") references "designer"."entity" ("id", "environment_id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_intent_id_environment_id_foreign" foreign key ("intent_id", "environment_id") references "designer"."intent" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_reprompt_id_environment_id_foreign" foreign key ("reprompt_id", "environment_id") references "designer"."response" ("id", "environment_id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_pkey" primary key ("id", "environment_id");[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add column "environment_id" varchar(24) not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" alter column "entity_id" type varchar(24) using ("entity_id"::varchar(24));[90m [took 53 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" drop constraint "entity_variant_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add constraint "entity_variant_entity_id_environment_id_foreign" foreign key ("entity_id", "environment_id") references "designer"."entity" ("id", "environment_id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add constraint "entity_variant_pkey" primary key ("id", "environment_id");[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add column "environment_id" varchar(24) null default null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 23 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" alter column "media_id" type varchar(24) using ("media_id"::varchar(24));[90m [took 41 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" drop constraint "card_attachment_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_media_id_environment_id_foreign" foreign key ("media_id", "environment_id") references "designer"."media_attachment" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add column "environment_id" varchar(24) not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" alter column "card_id" type varchar(24) using ("card_id"::varchar(24));[90m [took 41 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" drop constraint "card_button_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_card_id_environment_id_foreign" foreign key ("card_id", "environment_id") references "designer"."card_attachment" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add column "environment_id" varchar(24) null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "story_id" type varchar(24) using ("story_id"::varchar(24));[90m [took 44 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 18 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "event_id" type varchar(24) using ("event_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "intent_id" type varchar(24) using ("intent_id"::varchar(24));[90m [took 56 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_story_id_environment_id_foreign" foreign key ("story_id", "environment_id") references "designer"."story" ("id", "environment_id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_event_id_environment_id_foreign" foreign key ("event_id", "environment_id") references "designer"."event" ("id", "environment_id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_intent_id_environment_id_foreign" foreign key ("intent_id", "environment_id") references "designer"."intent" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 18 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 52 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" alter column "prompt_id" type varchar(24) using ("prompt_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" drop constraint "condition_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_prompt_id_environment_id_foreign" foreign key ("prompt_id", "environment_id") references "designer"."prompt" ("id", "environment_id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add column "environment_id" varchar(24) not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 44 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" alter column "condition_id" type varchar(24) using ("condition_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 18 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" drop constraint "condition_predicate_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_condition_id_environment_id_foreign" foreign key ("condition_id", "environment_id") references "designer"."condition" ("id", "environment_id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add column "environment_id" varchar(24) not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 50 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" alter column "condition_id" type varchar(24) using ("condition_id"::varchar(24));[90m [took 13 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" drop constraint "condition_assertion_pkey";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_condition_id_environment_id_foreign" foreign key ("condition_id", "environment_id") references "designer"."condition" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_id_environment_id_unique" unique ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add column "environment_id" varchar(24) null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 49 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "condition_id" type varchar(24) using ("condition_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 20 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "discriminator_id" type varchar(24) using ("discriminator_id"::varchar(24));[90m [took 62 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "prompt_id" type varchar(24) using ("prompt_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_pkey";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_condition_id_environment_id_foreign" foreign key ("condition_id", "environment_id") references "designer"."condition" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_discriminator_id_environment_id_foreign" foreign key ("discriminator_id", "environment_id") references "designer"."response_discriminator" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_prompt_id_environment_id_foreign" foreign key ("prompt_id", "environment_id") references "designer"."prompt" ("id", "environment_id") on update cascade on delete set null;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_pkey" primary key ("id", "environment_id");[90m [took 43 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add column "environment_id" varchar(24) null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" alter column "id" type varchar(24) using ("id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" alter column "variant_id" type varchar(24) using ("variant_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" alter column "assistant_id" type varchar(24) using ("assistant_id"::varchar(24));[90m [took 19 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" alter column "card_id" type varchar(24) using ("card_id"::varchar(24));[90m [took 52 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" alter column "media_id" type varchar(24) using ("media_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_pkey";[90m [took 9 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_variant_id_environment_id_foreign" foreign key ("variant_id", "environment_id") references "designer"."response_variant" ("id", "environment_id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_card_id_environment_id_foreign" foreign key ("card_id", "environment_id") references "designer"."card_attachment" ("id", "environment_id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_media_id_environment_id_foreign" foreign key ("media_id", "environment_id") references "designer"."media_attachment" ("id", "environment_id") on update cascade on delete set null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_pkey" primary key ("id", "environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_active_persona_id_active_environment_id_foreign" foreign key ("active_persona_id", "active_environment_id") references "designer"."persona" ("id", "environment_id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx69
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231003141801')[90m [took 25 ms][39m
Applied 'Migration20231003141801'
Processing 'Migration20231020114109'
[90m[query] [39msavepoint trx70
[90m[query] [39malter table "designer"."assistant" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" drop column "deleted_at";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop column "deleted_at";[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx70
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231020114109')[90m [took 3 ms][39m
Applied 'Migration20231020114109'
Processing 'Migration20231020122033'
[90m[query] [39msavepoint trx71
[90m[query] [39malter table "designer"."assistant" drop constraint "assistant_workspace_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" drop constraint "assistant_active_persona_id_active_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" drop constraint "media_attachment_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint "folder_parent_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" drop constraint "folder_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop constraint "variable_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop constraint "variable_folder_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" drop constraint "response_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" drop constraint "response_folder_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" drop constraint "response_discriminator_response_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" drop constraint "response_discriminator_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop constraint "persona_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop constraint "persona_folder_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop constraint "persona_override_persona_id_environment_id_foreign";[90m [took 11 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop constraint "persona_override_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop constraint "prompt_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop constraint "prompt_folder_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" drop constraint "prompt_persona_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" drop constraint "intent_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" drop constraint "intent_folder_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" drop constraint "utterance_intent_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" drop constraint "utterance_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" drop constraint "function_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" drop constraint "function_folder_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" drop constraint "function_variable_function_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" drop constraint "function_variable_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" drop constraint "function_path_function_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" drop constraint "function_path_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" drop constraint "flow_folder_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint "story_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint "story_folder_id_environment_id_foreign";[90m [took 28 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint "story_flow_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint "story_assignee_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" drop constraint "event_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" drop constraint "event_folder_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" drop constraint "event_mapping_event_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" drop constraint "event_mapping_variable_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" drop constraint "event_mapping_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" drop constraint "entity_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" drop constraint "entity_folder_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_entity_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_intent_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_reprompt_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" drop constraint "required_entity_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" drop constraint "entity_variant_entity_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" drop constraint "entity_variant_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" drop constraint "card_attachment_media_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" drop constraint "card_attachment_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" drop constraint "card_button_card_id_environment_id_foreign";[90m [took 23 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" drop constraint "card_button_assistant_id_foreign";[90m [took 11 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_story_id_environment_id_foreign";[90m [took 9 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_assistant_id_foreign";[90m [took 11 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_event_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_intent_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" drop constraint "condition_assistant_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" drop constraint "condition_prompt_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" drop constraint "condition_predicate_condition_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" drop constraint "condition_predicate_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" drop constraint "condition_assertion_condition_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" drop constraint "condition_assertion_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_condition_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_assistant_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_discriminator_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_prompt_id_environment_id_foreign";[90m [took 16 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_variant_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_assistant_id_foreign";[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_card_id_environment_id_foreign";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" drop constraint "response_attachment_media_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_workspace_id_foreign" foreign key ("workspace_id") references "identity"."workspace" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_active_persona_id_active_environment_id_foreign" foreign key ("active_persona_id", "active_environment_id") references "designer"."persona" ("id", "environment_id") on update cascade on delete set default;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" add constraint "media_attachment_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_parent_id_environment_id_foreign" foreign key ("parent_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 41 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" add constraint "response_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_response_id_environment_id_foreign" foreign key ("response_id", "environment_id") references "designer"."response" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_persona_id_environment_id_foreign" foreign key ("persona_id", "environment_id") references "designer"."persona" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 45 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" add constraint "prompt_persona_id_environment_id_foreign" foreign key ("persona_id", "environment_id") references "designer"."persona_override" ("id", "environment_id") on update cascade on delete set default;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add constraint "intent_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_intent_id_environment_id_foreign" foreign key ("intent_id", "environment_id") references "designer"."intent" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" add constraint "function_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_function_id_environment_id_foreign" foreign key ("function_id", "environment_id") references "designer"."function" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_function_id_environment_id_foreign" foreign key ("function_id", "environment_id") references "designer"."function" ("id", "environment_id") on update cascade on delete cascade;[90m [took 53 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" add constraint "flow_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "assignee_id" type int using ("assignee_id"::int);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "assignee_id" drop not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_flow_id_environment_id_foreign" foreign key ("flow_id", "environment_id") references "designer"."flow" ("id", "environment_id") on update cascade on delete set default;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_assignee_id_foreign" foreign key ("assignee_id") references "identity"."user" ("id") on update cascade on delete set default;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" add constraint "event_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 44 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_event_id_environment_id_foreign" foreign key ("event_id", "environment_id") references "designer"."event" ("id", "environment_id") on update cascade on delete cascade;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_variable_id_environment_id_foreign" foreign key ("variable_id", "environment_id") references "designer"."variable" ("id", "environment_id") on update cascade on delete set default;[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" add constraint "entity_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_entity_id_environment_id_foreign" foreign key ("entity_id", "environment_id") references "designer"."entity" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_intent_id_environment_id_foreign" foreign key ("intent_id", "environment_id") references "designer"."intent" ("id", "environment_id") on update cascade on delete cascade;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_reprompt_id_environment_id_foreign" foreign key ("reprompt_id", "environment_id") references "designer"."response" ("id", "environment_id") on update cascade on delete set default;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 54 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add constraint "entity_variant_entity_id_environment_id_foreign" foreign key ("entity_id", "environment_id") references "designer"."entity" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add constraint "entity_variant_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_media_id_environment_id_foreign" foreign key ("media_id", "environment_id") references "designer"."media_attachment" ("id", "environment_id") on update cascade on delete set default;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_card_id_environment_id_foreign" foreign key ("card_id", "environment_id") references "designer"."card_attachment" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_story_id_environment_id_foreign" foreign key ("story_id", "environment_id") references "designer"."story" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_event_id_environment_id_foreign" foreign key ("event_id", "environment_id") references "designer"."event" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_intent_id_environment_id_foreign" foreign key ("intent_id", "environment_id") references "designer"."intent" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 38 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_prompt_id_environment_id_foreign" foreign key ("prompt_id", "environment_id") references "designer"."prompt" ("id", "environment_id") on update cascade on delete set default;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_condition_id_environment_id_foreign" foreign key ("condition_id", "environment_id") references "designer"."condition" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_condition_id_environment_id_foreign" foreign key ("condition_id", "environment_id") references "designer"."condition" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_condition_id_environment_id_foreign" foreign key ("condition_id", "environment_id") references "designer"."condition" ("id", "environment_id") on update cascade on delete set default;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_discriminator_id_environment_id_foreign" foreign key ("discriminator_id", "environment_id") references "designer"."response_discriminator" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_prompt_id_environment_id_foreign" foreign key ("prompt_id", "environment_id") references "designer"."prompt" ("id", "environment_id") on update cascade on delete set default;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_variant_id_environment_id_foreign" foreign key ("variant_id", "environment_id") references "designer"."response_variant" ("id", "environment_id") on update cascade on delete cascade;[90m [took 51 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_card_id_environment_id_foreign" foreign key ("card_id", "environment_id") references "designer"."card_attachment" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" add constraint "response_attachment_media_id_environment_id_foreign" foreign key ("media_id", "environment_id") references "designer"."media_attachment" ("id", "environment_id") on update cascade on delete cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx71
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231020122033')[90m [took 7 ms][39m
Applied 'Migration20231020122033'
Processing 'Migration20231128162047'
[90m[query] [39msavepoint trx72
[90m[query] [39malter table "designer"."intent" alter column "id" type varchar(64) using ("id"::varchar(64));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" alter column "intent_id" type varchar(64) using ("intent_id"::varchar(64));[90m [took 53 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "intent_id" type varchar(64) using ("intent_id"::varchar(64));[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "intent_id" type varchar(64) using ("intent_id"::varchar(64));[90m [took 7 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx72
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231128162047')[90m [took 3 ms][39m
Applied 'Migration20231128162047'
Processing 'Migration20231206132600'
[90m[query] [39msavepoint trx73
[90m[query] [39malter table "designer"."assistant" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" add constraint "assistant_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" add column "updated_by_id" int null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."media_attachment" add constraint "media_attachment_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add column "updated_by_id" int null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_discriminator" add constraint "response_discriminator_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."utterance" add constraint "utterance_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add column "updated_by_id" int null default null;[90m [took 18 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" add constraint "function_variable_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" add constraint "function_path_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add column "updated_by_id" int null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" add constraint "event_mapping_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add column "updated_at" timestamptz(0) not null default now(), add column "updated_by_id" int null default null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" add constraint "required_entity_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" add constraint "entity_variant_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add column "updated_by_id" int null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" add constraint "card_attachment_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 11 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add column "updated_by_id" int null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_button" add constraint "card_button_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 34 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" add constraint "trigger_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 7 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add constraint "condition_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add column "updated_by_id" int null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_predicate" add constraint "condition_predicate_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add column "updated_by_id" int null default null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition_assertion" add constraint "condition_assertion_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add column "updated_by_id" int null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade on delete set null;[90m [took 5 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx73
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231206132600')[90m [took 3 ms][39m
Applied 'Migration20231206132600'
Processing 'Migration20231207155706'
[90m[query] [39msavepoint trx74
[90m[query] [39malter table "designer"."assistant" alter column "active_environment_id" type varchar(24) using ("active_environment_id"::varchar(24));[90m [took 55 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "description" type text using ("description"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "default_value" type text using ("default_value"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "system_prompt" type text using ("system_prompt"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" alter column "system_prompt" type text using ("system_prompt"::text);[90m [took 78 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" alter column "description" type text using ("description"::text);[90m [took 8 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" alter column "code" type text using ("code"::text);[90m [took 87 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" alter column "description" type text using ("description"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_variable" alter column "description" type text using ("description"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "diagram_id" type varchar(24) using ("diagram_id"::varchar(24));[90m [took 19 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "description" type text using ("description"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "description" type text using ("description"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" alter column "description" type text using ("description"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" alter column "description" type text using ("description"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx74
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231207155706')[90m [took 3 ms][39m
Applied 'Migration20231207155706'
Processing 'Migration20231220144634'
[90m[query] [39msavepoint trx75
[90m[query] [39malter table "designer"."folder" drop constraint if exists "folder_scope_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" alter column "active_environment_id" type varchar(24) using ("active_environment_id"::varchar(24));[90m [took 42 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" alter column "active_environment_id" drop not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 106 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "scope" type text using ("scope"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_scope_check" check ("scope" in ('entity', 'event', 'flow', 'function', 'intent', 'prompt', 'persona', 'response', 'story', 'variable', 'knowledge-base'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 71 ms, 0 result][39m
[90m[query] [39malter table "designer"."response" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 17 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "environment_id" set not null;[90m [took 69 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 18 ms, 0 result][39m
[90m[query] [39malter table "designer"."prompt" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 85 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" alter column "environment_id" set not null;[90m [took 10 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 84 ms, 0 result][39m
[90m[query] [39malter table "designer"."function" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."flow" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 94 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "environment_id" set not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 92 ms, 0 result][39m
[90m[query] [39malter table "designer"."event" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 12 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 79 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 14 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 78 ms, 0 result][39m
[90m[query] [39malter table "designer"."card_attachment" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 90 ms, 0 result][39m
[90m[query] [39malter table "designer"."trigger" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 21 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 81 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" alter column "environment_id" type varchar(24) using ("environment_id"::varchar(24));[90m [took 15 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_attachment" alter column "environment_id" set not null;[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx75
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231220144634')[90m [took 3 ms][39m
Applied 'Migration20231220144634'
Processing 'Migration20231227154906'
[90m[query] [39msavepoint trx76
[90m[query] [39mcreate index "folder_environment_id_index" on "designer"."folder" ("environment_id");[90m [took 60 ms, 0 result][39m
[90m[query] [39mcreate index "variable_environment_id_index" on "designer"."variable" ("environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate index "response_environment_id_index" on "designer"."response" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "response_discriminator_environment_id_index" on "designer"."response_discriminator" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "persona_environment_id_index" on "designer"."persona" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "persona_override_environment_id_index" on "designer"."persona_override" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "intent_environment_id_index" on "designer"."intent" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "utterance_environment_id_index" on "designer"."utterance" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "function_environment_id_index" on "designer"."function" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "function_variable_environment_id_index" on "designer"."function_variable" ("environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate index "flow_environment_id_index" on "designer"."flow" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "story_environment_id_index" on "designer"."story" ("environment_id");[90m [took 8 ms, 0 result][39m
[90m[query] [39mcreate index "event_environment_id_index" on "designer"."event" ("environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate index "event_mapping_environment_id_index" on "designer"."event_mapping" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "card_attachment_environment_id_index" on "designer"."card_attachment" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "card_button_environment_id_index" on "designer"."card_button" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "trigger_environment_id_index" on "designer"."trigger" ("environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate index "condition_environment_id_index" on "designer"."condition" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "condition_predicate_environment_id_index" on "designer"."condition_predicate" ("environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate index "condition_assertion_environment_id_index" on "designer"."condition_assertion" ("environment_id");[90m [took 7 ms, 0 result][39m
[90m[query] [39mcreate index "response_variant_environment_id_index" on "designer"."response_variant" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx76
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231227154906')[90m [took 3 ms][39m
Applied 'Migration20231227154906'
Processing 'Migration20231229174515'
[90m[query] [39msavepoint trx77
[90m[query] [39malter table "designer"."entity" alter column "id" type varchar(64) using ("id"::varchar(64));[90m [took 10 ms, 0 result][39m
[90m[query] [39malter table "designer"."required_entity" alter column "entity_id" type varchar(64) using ("entity_id"::varchar(64));[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" alter column "entity_id" type varchar(64) using ("entity_id"::varchar(64));[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx77
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231229174515')[90m [took 2 ms][39m
Applied 'Migration20231229174515'
Processing 'Migration20231229203423'
[90m[query] [39msavepoint trx78
[90m[query] [39mcreate index "entity_environment_id_index" on "designer"."entity" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "required_entity_environment_id_index" on "designer"."required_entity" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mcreate index "entity_variant_environment_id_index" on "designer"."entity_variant" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx78
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20231229203423')[90m [took 3 ms][39m
Applied 'Migration20231229203423'
Processing 'Migration20240111214820'
[90m[query] [39msavepoint trx79
[90m[query] [39malter table "designer"."function_variable" alter column "created_at" type timestamptz using ("created_at"::timestamptz);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."function_path" alter column "created_at" type timestamptz using ("created_at"::timestamptz);[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx79
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240111214820')[90m [took 3 ms][39m
Applied 'Migration20240111214820'
Processing 'Migration20240112154323'
[90m[query] [39msavepoint trx80
[90m[query] [39malter table "designer"."entity_variant" alter column "value" type varchar(320) using ("value"::varchar(320));[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx80
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240112154323')[90m [took 3 ms][39m
Applied 'Migration20240112154323'
Processing 'Migration20240124154345'
[90m[query] [39msavepoint trx81
[90m[query] [39malter table "designer"."variable" drop constraint if exists "variable_datatype_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "id" type varchar(64) using ("id"::varchar(64));[90m [took 10 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "datatype" type text using ("datatype"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_datatype_check" check ("datatype" in ('any', 'text', 'date', 'image', 'number', 'boolean'));[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."event_mapping" alter column "variable_id" type varchar(64) using ("variable_id"::varchar(64));[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."entity_variant" alter column "value" type text using ("value"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx81
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240124154345')[90m [took 3 ms][39m
Applied 'Migration20240124154345'
Processing 'Migration20240124172709'
[90m[query] [39msavepoint trx82
[90m[query] [39malter table "designer"."variable" drop constraint if exists "variable_system_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" alter column "system" type text using ("system"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" add constraint "variable_system_check" check ("system" in ('locale', 'channel', 'user_id', 'sessions', 'platform', 'timestamp', 'last_event', 'last_response', 'last_utterance', 'intent_confidence'));[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx82
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240124172709')[90m [took 3 ms][39m
Applied 'Migration20240124172709'
Processing 'Migration20240130101907'
[90m[query] [39msavepoint trx83
[90m[query] [39malter table "designer"."variable" add column "is_system" boolean not null default false;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."variable" drop column "system";[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx83
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240130101907')[90m [took 3 ms][39m
Applied 'Migration20240130101907'
Processing 'Migration20240306162654'
[90m[query] [39msavepoint trx84
[90m[query] [39malter table "designer"."persona" drop constraint if exists "persona_model_check";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop constraint if exists "persona_override_model_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" drop constraint if exists "story_status_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "model" type text using ("model"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_model_check" check ("model" in ('text-davinci-003', 'gpt-3.5-turbo-1106', 'gpt-3.5-turbo', 'gpt-4', 'gpt-4-turbo', 'claude-v1', 'claude-v2', 'claude-instant-v1', 'gemini-pro'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" alter column "model" type text using ("model"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_model_check" check ("model" in ('text-davinci-003', 'gpt-3.5-turbo-1106', 'gpt-3.5-turbo', 'gpt-4', 'gpt-4-turbo', 'claude-v1', 'claude-v2', 'claude-instant-v1', 'gemini-pro'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" alter column "status" type text using ("status"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."story" add constraint "story_status_check" check ("status" in ('to_do', 'complete', 'in_progress'));[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx84
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240306162654')[90m [took 3 ms][39m
Applied 'Migration20240306162654'
Processing 'Migration20240327105625'
[90m[query] [39msavepoint trx85
[90m[query] [39malter table "designer"."trigger" drop constraint "trigger_story_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39mcreate table "designer"."workflow" ("id" varchar(24) not null, "environment_id" varchar(24) not null default null, "created_at" timestamptz(0) not null default now(), "updated_at" timestamptz(0) not null default now(), "updated_by_id" int not null, "name" varchar(255) not null, "assistant_id" varchar(24) not null, "created_by_id" int not null, "folder_id" varchar(24) null default null, "status" text check ("status" in ('to_do', 'complete', 'in_progress')) null default null, "is_start" boolean not null, "diagram_id" varchar(24) not null, "assignee_id" int null default null, "description" text null default null, constraint "workflow_pkey" primary key ("id", "environment_id"));[90m [took 12 ms, 0 result][39m
[90m[query] [39mcreate index "workflow_environment_id_index" on "designer"."workflow" ("environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."workflow" add constraint "workflow_id_environment_id_unique" unique ("id", "environment_id");[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."workflow" add constraint "workflow_updated_by_id_foreign" foreign key ("updated_by_id") references "identity"."user" ("id") on update cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."workflow" add constraint "workflow_assistant_id_foreign" foreign key ("assistant_id") references "designer"."assistant" ("id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."workflow" add constraint "workflow_created_by_id_foreign" foreign key ("created_by_id") references "identity"."user" ("id") on update cascade;[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."workflow" add constraint "workflow_folder_id_environment_id_foreign" foreign key ("folder_id", "environment_id") references "designer"."folder" ("id", "environment_id") on update cascade on delete cascade;[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."workflow" add constraint "workflow_assignee_id_foreign" foreign key ("assignee_id") references "identity"."user" ("id") on update cascade on delete set default;[90m [took 5 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."story" cascade;[90m [took 16 ms, 0 result][39m
[90m[query] [39mdrop table if exists "designer"."trigger" cascade;[90m [took 64 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" drop constraint if exists "persona_model_check";[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop constraint if exists "persona_override_model_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "model" type text using ("model"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_model_check" check ("model" in ('text-davinci-003', 'gpt-3.5-turbo-1106', 'gpt-3.5-turbo', 'gpt-4', 'gpt-4-turbo', 'claude-v1', 'claude-v2', 'claude-3-haiku', 'claude-3-sonnet', 'claude-3-opus', 'claude-instant-v1', 'gemini-pro'));[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" alter column "model" type text using ("model"::text);[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_model_check" check ("model" in ('text-davinci-003', 'gpt-3.5-turbo-1106', 'gpt-3.5-turbo', 'gpt-4', 'gpt-4-turbo', 'claude-v1', 'claude-v2', 'claude-3-haiku', 'claude-3-sonnet', 'claude-3-opus', 'claude-instant-v1', 'gemini-pro'));[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx85
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240327105625')[90m [took 3 ms][39m
Applied 'Migration20240327105625'
Processing 'Migration20240328133318'
[90m[query] [39msavepoint trx86
[90m[query] [39malter table "designer"."folder" drop constraint if exists "folder_scope_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" alter column "scope" type text using ("scope"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."folder" add constraint "folder_scope_check" check ("scope" in ('flow', 'event', 'entity', 'intent', 'prompt', 'persona', 'workflow', 'response', 'variable', 'function', 'knowledge-base'));[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx86
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240328133318')[90m [took 4 ms][39m
Applied 'Migration20240328133318'
Processing 'Migration20240515112209'
[90m[query] [39msavepoint trx87
[90m[query] [39malter table "designer"."condition" drop constraint "condition_prompt_id_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint "response_variant_prompt_id_environment_id_foreign";[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" add column "prompt" jsonb null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."condition" drop column "prompt_id";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add column "prompt" jsonb null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop column "prompt_id";[90m [took 5 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx87
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240515112209')[90m [took 3 ms][39m
Applied 'Migration20240515112209'
Processing 'Migration20240515112751'
[90m[query] [39msavepoint trx88
[90m[query] [39malter table "designer"."response_variant" drop column "json";[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx88
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240515112751')[90m [took 4 ms][39m
Applied 'Migration20240515112751'
Processing 'Migration20240515113805'
[90m[query] [39msavepoint trx89
[90m[query] [39malter table "designer"."assistant" drop constraint "assistant_active_persona_id_active_environment_id_foreign";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" alter column "active_environment_id" type varchar(24) using ("active_environment_id"::varchar(24));[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" alter column "active_environment_id" set not null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" drop constraint "assistant_active_persona_id_active_environment_id_unique";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."assistant" drop column "active_persona_id";[90m [took 3 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx89
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240515113805')[90m [took 3 ms][39m
Applied 'Migration20240515113805'
Processing 'Migration20240515115632'
[90m[query] [39msavepoint trx90
[90m[query] [39malter table "designer"."condition" add column "assertions" jsonb null default '[]';[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx90
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240515115632')[90m [took 3 ms][39m
Applied 'Migration20240515115632'
Processing 'Migration20240530135155'
[90m[query] [39msavepoint trx91
[90m[query] [39malter table "designer"."persona" drop constraint if exists "persona_model_check";[90m [took 5 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" drop constraint if exists "persona_override_model_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" drop constraint if exists "response_variant_type_check";[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" alter column "model" type text using ("model"::text);[90m [took 3 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona" add constraint "persona_model_check" check ("model" in ('text-davinci-003', 'gpt-3.5-turbo-1106', 'gpt-3.5-turbo', 'gpt-4', 'gpt-4-turbo', 'gpt-4o', 'claude-v1', 'claude-v2', 'claude-3-haiku', 'claude-3-sonnet', 'claude-3-opus', 'claude-instant-v1', 'gemini-pro'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" alter column "model" type text using ("model"::text);[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."persona_override" add constraint "persona_override_model_check" check ("model" in ('text-davinci-003', 'gpt-3.5-turbo-1106', 'gpt-3.5-turbo', 'gpt-4', 'gpt-4-turbo', 'gpt-4o', 'claude-v1', 'claude-v2', 'claude-3-haiku', 'claude-3-sonnet', 'claude-3-opus', 'claude-instant-v1', 'gemini-pro'));[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."intent" add column "automatic_reprompt_settings" jsonb null default null;[90m [took 4 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" alter column "type" type text using ("type"::text);[90m [took 6 ms, 0 result][39m
[90m[query] [39malter table "designer"."response_variant" add constraint "response_variant_type_check" check ("type" in ('prompt', 'text'));[90m [took 4 ms, 0 result][39m
[90m[query] [39mrelease savepoint trx91
[90m[query] [39minsert into "public"."designer_migrations" ("name") values ('Migration20240530135155')[90m [took 4 ms][39m
Applied 'Migration20240530135155'
[90m[query] [39mcommit
INFO [2024-06-06 19:53:01.511 +0000]: Running migrations on MAIN pg database in private-cloud environment with directory post and objects schema...
INFO [2024-06-06 19:53:01.511 +0000]: Loading secrets from environment variables ...
INFO [2024-06-06 19:53:01.512 +0000]: Starting migration...
INFO [2024-06-06 19:53:01.919 +0000]: Batch 1 run: 11 migrations.
INFO [2024-06-06 19:53:01.919 +0000]: Migration file: 0001_revert_internal_admin.js
INFO [2024-06-06 19:53:01.919 +0000]: Migration file: 0002_drop_team_members_triggers.js
INFO [2024-06-06 19:53:01.919 +0000]: Migration file: 0003_drop_organizations_mirroring.js
INFO [2024-06-06 19:53:01.919 +0000]: Migration file: 0004_drop_organizations.js
INFO [2024-06-06 19:53:01.919 +0000]: Migration file: 0005_drop_team_members_validations.js
INFO [2024-06-06 19:53:01.920 +0000]: Migration file: 0006_drop_team_members_constrains.js
INFO [2024-06-06 19:53:01.920 +0000]: Migration file: 0007_drop_team_members_table.js
INFO [2024-06-06 19:53:01.920 +0000]: Migration file: 0008_drop_threads_comments_mirroring.js
INFO [2024-06-06 19:53:01.920 +0000]: Migration file: 0009_drop_threads_comments.js
INFO [2024-06-06 19:53:01.920 +0000]: Migration file: 0010_organization_user_roles_view.js
INFO [2024-06-06 19:53:01.920 +0000]: Migration file: 0011_update_organization_user_roles_view.js
INFO [2024-06-06 19:53:01.926 +0000]: Migrations completed for MAIN pg database in private-cloud environment with directory post and objects schema!
WARN [2024-06-06 19:53:01.927 +0000]: No tests for mikroORM engine
+ dbcli v2:seed:pg -e private-cloud -s env
INFO [2024-06-06 19:53:03.513 +0000]: Seeding MAIN pg database in private-cloud environment...
INFO [2024-06-06 19:53:03.518 +0000]: Loading secrets from environment variables ...
(node:160) NOTE: The AWS SDK for JavaScript (v2) will enter maintenance mode
on September 8, 2024 and reach end-of-support on September 8, 2025.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
INFO [2024-06-06 19:53:04.549 +0000]: Seeding completed for MAIN pg database in private-cloud environment!
+ dbcli --version
+ awk '{ print $1 }'
+ version=@voiceflow/dbcli/1.244.1
+ version=v1.244.1
+ dbcli update:schema-version -v v1.244.1 -n dev-osedania
INFO [2024-06-06 19:53:06.216 +0000]: Updating db Schema Version to v1.244.1 in namespace dev-osedania in local environment...
INFO [2024-06-06 19:53:06.346 +0000]: Namespace found!
INFO [2024-06-06 19:53:06.347 +0000]: Updating annotation to: v1.244.1
INFO [2024-06-06 19:53:06.372 +0000]: Namespace updated!: {"apiVersion":"v1","kind":"Namespace","metadata":{"annotations":{"voiceflow.com/doppler.interval":"1m0s","voiceflow.com/env.lastModified":"2024-06-06T21:50:53+02:00","voiceflow.com/env.lease":"-1","voiceflow.com/env.lock":"2965daa3-0e45-4bd6-b004-b4810724016f","voiceflow.com/env.managed":"vfcli","voiceflow.com/env.owner":"osegbemoh.dania@voiceflow.com","voiceflow.com/env.personal":"true","voiceflow.com/env.remarks":"","voiceflow.com/node-group":"","voiceflow.db.schema.track":"master","voiceflow.db.schema.version":"v1.244.1"},"creationTimestamp":"2024-06-06T19:50:54.000Z","labels":{"kubernetes.io/metadata.name":"dev-osedania"},"managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:voiceflow.com/doppler.interval":{},"f:voiceflow.com/env.lastModified":{},"f:voiceflow.com/env.lease":{},"f:voiceflow.com/env.lock":{},"f:voiceflow.com/env.managed":{},"f:voiceflow.com/env.owner":{},"f:voiceflow.com/env.personal":{},"f:voiceflow.com/env.remarks":{},"f:voiceflow.com/node-group":{},"f:voiceflow.db.schema.track":{},"f:voiceflow.db.schema.version":{}},"f:labels":{".":{},"f:kubernetes.io/metadata.name":{}}}},"manager":"vfcli","operation":"Update","time":"2024-06-06T19:50:54.000Z"}],"name":"dev-osedania","resourceVersion":"209455011","uid":"0d1002ea-7678-4538-9ad5-383c78954ffe"},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}}
